!function(){"use strict";var e,t={2943:function(e,t,i){var n;i.d(t,{c:function(){return n}}),function(e){e.Section="SECTION",e.Widget="WIDGET"}(n||(n={}))},5890:function(e,t,i){var n=i(2008),o=i(680),a=i(9069),r=i(2977);t.A=(0,n.N)((({popup:e})=>({filterPhrase:e.filterPhrase,showFilter:e.popupType===a.GI.AddWidget})),(()=>({applyFilter:o.R6})))(r.A)},5860:function(e,t,i){var n=i(2008),o=i(5895),a=i(4611),r=i(9069),s=i(2904);t.A=(0,n.N)((e=>{var t;const i=(({editableAreasConfiguration:e,metadata:t,popup:i,widgetZonesConfiguration:n})=>{const a=e[i.areaIdentifier],r=n[i.zoneIdentifier];return(0,o.D)(i.popupType,t,a,r)})(e),{popup:n}=e,s=n.popupType===r.GI.AddWidget&&null!==(t=n.recentWidgets)&&void 0!==t?t:[];return{recentItems:s,columnType:n.columnType,showComponent:n.popupType===r.GI.AddWidget&&i.length>a.oe&&s.length>0}}))(s.A)},9908:function(e,t,i){var n=i(2008),o=i(9813),a=i(680),r=i(9069),s=i(5007);(0,n.N)((({popup:e},{sectionIdentifier:t})=>({isSectionListOpen:e.componentIdentifier===t&&e.popupType===r.GI.AddSection})),(()=>({closePopup:o.fs,openPopup:(e,t,i)=>(0,a.PB)(e,r.GI.AddSection,t,i),setPopupPosition:o.iy})))(s.A)},4679:function(e,t,i){i.d(t,{Zj:function(){return o},cj:function(){return s},es:function(){return a},g7:function(){return r}});var n=i(1496);const o=(e,t)=>{const i=Object.values(t);return null===e?i:e.length?i.filter((t=>c(e,t.typeIdentifier))):[]},a=(e,t)=>null===e||!!e.length&&c(e,t),r=(e,t)=>e&&n.Qc.contains(e,t),s=(e,t)=>null===e||null===t?null!=e?e:t:null==e?void 0:e.filter((e=>c(t,e))),c=(e,t)=>e.some((e=>n.yO.equalsIgnoreCase(e,t)))},2325:function(e,t,i){i.d(t,{_B:function(){return r},bN:function(){return a}});const n=Object.prototype.hasOwnProperty,o=(e,t)=>e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t,a=(e,t)=>{if(o(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(let a=0;a<i.length;a++)if(!n.call(t,i[a])||!o(e[i[a]],t[i[a]]))return!1;return!0},r=e=>Array.isArray(e)?e.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:{type:null}})),{}):e},1496:function(e,t,i){i.d(t,{DL:function(){return g},Qc:function(){return c},UI:function(){return r},cT:function(){return u},jp:function(){return d},yO:function(){return s}});var n=i(8999),o=i(9069),a=i(3687);const r={isEmpty(e){return e.constructor===Object&&0===Object.keys(e).length},assignDefined(e,...t){for(const i of t)for(const t of Object.keys(i)){const n=i[t];void 0!==n&&(e[t]=n)}return e}},s={format(e,...t){let i=e;return t.forEach(((e,t)=>{i=i.replace(new RegExp("\\{"+t+"\\}","g"),e)})),i},equalsIgnoreCase(e,t){return 0===e.localeCompare(t,void 0,{sensitivity:"base"})}},c={insertItemIntoArray(e,t,i){return i>e.length||i<0?e:[...e.slice(0,i),t,...e.slice(i)]},replaceItem:(e,t,i)=>!e.length||i>e.length||i<0?e:[...e.slice(0,i),t,...e.slice(i+1)],removeItem:(e,t)=>t>e.length||t<0?e:[...e.slice(0,t),...e.slice(t+1)],moveItemBetweenArrays:(e,t,i,n=null)=>{const o=null===n?e.length-1:n.length;if(i<0||i>o)throw new RangeError("The [position] argument is invalid.");if(!c.contains(e,t))throw new Error("The [item] was not found in [sourceArray].");const a=e.filter((e=>e!==t));return null===n?{sourceArray:c.insertItemIntoArray(a,t,i),destinationArray:null}:{sourceArray:a,destinationArray:c.insertItemIntoArray(n,t,i)}},getUniqueValues:(e,t=(e=>e))=>[...new Set(e.map(t))],contains:(e,t)=>e.indexOf(t)>=0,move:(e,t,i)=>(e.splice(i,0,e.splice(t,1)[0]),e),swap:(e,t,i)=>{const[n,o]=t>i?[i,t]:[t,i];return[...e.slice(0,n),e[o],...e.slice(n+1,o),e[n],...e.slice(o+1)]},toRecord:(e,t)=>e.reduce(((e,i)=>(e[i[t]]=i,e)),{})},l=(e,t)=>{const i=new CustomEvent(e,{detail:t});document.dispatchEvent(i)},p=e=>{let t=[],i=e.target;if(e.path)t=e.path;else for(;i;)t.push(i),i=i.parentElement;return t.filter((e=>e instanceof Node))},d={removeSectionFromDragAndDrop:e=>{l(n.Kr,{sectionIdentifier:e})},mountSectionToDragAndDropAfterNextTick:async(e,t)=>{await e.$nextTick((()=>{d.mountSectionToDragAndDrop(t)}))},mountSectionToDragAndDrop:e=>{l(n.Oq,{sectionIdentifier:e})}},g={disableDocumentLinks:()=>{const e=document.getElementsByTagName("a"),t=e.length;for(let i=0;i<t;i++)e[i].onclick=()=>!1},disableElementLinks:e=>{const t=e.getElementsByTagName("a"),i=t.length;let n;for(let e=0;e<i;e++)n=t[e],n.closest("div[data-inline-editor]")||(n.onclick=()=>!1)}},u={getTheme:e=>{switch(e){case o.GI.AddWidget:case o.GI.Personalization:return a.Sx.Widget;case o.GI.AddSection:case o.GI.ChangeSection:return a.Sx.Section}},isFriendlyElementSelected:(e,t)=>p(e).some((e=>t.some((t=>{const i=document.querySelector(t);return i&&(i===e||i.contains(e))})))),doesElementOrAncestor(e,t,i){let n=e;for(;n;){if(i(n))return!0;if(t&&t===n)break;n=n.parentElement}return!1}}},5895:function(e,t,i){i.d(t,{D:function(){return s},d:function(){return c}});var n=i(6485),o=i(4679),a=i(9069),r=i(3687);const s=(e,t,i,s)=>{var c;if(![a.GI.AddWidget,a.GI.AddSection].includes(e))return[];const l=(0,n.cQ)(r.SL.PopUpElementsService),p=e===a.GI.AddWidget,d=p?t.widgets:t.sections,g=p?(0,o.cj)(i.widgetRestrictions,null!==(c=null==s?void 0:s.widgetRestrictions)&&void 0!==c?c:null):i.sectionRestrictions,u=(0,o.Zj)(g,d);return p?l.getWidgetElements(u):l.getSectionElements(u)},c=(e,t)=>{if(!t)return e;const i=t.toLowerCase();return e.filter((e=>e.name.toLowerCase().includes(i)))}},1945:function(e,t,i){i.d(t,{ME:function(){return r},cx:function(){return a},m9:function(){return p},tK:function(){return o}});var n=i(9069);const o={Pixel:"pixel",Percent:"percent"},a=(e,t,i=o.Pixel)=>{const a=c(e),r=s(t,i)/2;return a.left<r?n.lD.Right:a.right<r?n.lD.Left:n.lD.Center},r=e=>e.top>window.innerHeight/2?n.nl.Top:n.nl.Bottom,s=(e,t)=>t===o.Percent?e:l(null!=e?e:(e=>{const t=document.body.querySelector("kentico-pop-up-container");return t&&t.offsetWidth?t.offsetWidth:e})(e)),c=e=>({left:l(e.left),right:l(window.innerWidth-e.right)}),l=e=>e/window.innerWidth,p=e=>({left:e.left+e.width/2+pageXOffset,top:r(e)===n.nl.Top?e.top-10+pageYOffset:e.top+e.height+10+pageYOffset})},4611:function(e,t,i){i.d(t,{Hd:function(){return a},oe:function(){return o},Ct:function(){return s},$v:function(){return r}});const n="ktc.pagebuilder.recentwidgets",o=4,a=4,r=()=>{var e;return null!==(e=(e=>{const t=localStorage.getItem(e);return t?JSON.parse(t):void 0})(n))&&void 0!==e?e:[]},s=e=>{const t=r(),i=t.indexOf(e);i>=0&&t.splice(i,1),t.unshift(e),((e,t)=>{localStorage.setItem(e,JSON.stringify(t))})(n,t)}},3e3:function(e,t,i){i.d(t,{N:function(){return g},r:function(){return d}});var n=i(373),o=i.n(n),a=i(3821),r=i(6034),s=i(3972),c=i(4339),l=i(7215);let p=!1;const d=(e,t,i,n,r,p)=>(0,a.v)((()=>{if(!e)return;n&&(0,l.I)(),y(e);const a=n?u(e):{},d=(0,s.k)(i,t,a),g=(0,c.u)(d,t,a,r);p&&p(g),new(o())(e,g)})),g=({editor:e})=>{const t=e.querySelector(r.bV);if(t){t["data-froala.editor"].destroy()}},u=e=>{const t=e.dataset.richTextEditorConfiguration,{richTextEditor:i}=window.kentico.pageBuilder,n=i&&i.configurations&&i.configurations[t];return"object"==typeof n?n:{}},y=e=>{if(p)return;const{enableImageRecognition:t,getLinkMetadataEndpointUrl:i,richTextEditorLicense:o,contextMacros:a,getImageDescriptionEndpointUrl:r}=e.dataset,s="true"===t.toLowerCase();Object.assign(n.DEFAULTS,{getLinkMetadataEndpointUrl:i,licenseKey:o,getImageDescriptionEndpointUrl:r,isImageRecognitionEnabled:s},a?{contextMacros:JSON.parse(a)}:{}),p=!0}},4434:function(e,t,i){i.d(t,{K:function(){return g},D:function(){return u}});var n=i(373),o=i.n(n),a=i(4077),r=i(6034),s=i(3e3),c=i(4361);const l=e=>({toolbarInline:!0,charCounterCount:!1,events:{contentChanged(){p(e.editor,e.propertyName,this.html.get())},"commands.after"(e){if("html"===e&&this.codeView.isActive()){const e=this.$oel[0];(null==e?void 0:e.querySelector(".fr-btn.html-switch")).textContent=window.kentico.localization.strings["kentico.components.formcomponent.richtext.applybutton"]}}}}),p=(e,t,i)=>{const n=new CustomEvent("updateProperty",{detail:{name:t,value:(0,c.Ge)(i),refreshMarkup:!1}});e.dispatchEvent(n)};var d=i(7215);const g=()=>{o().MAIL_REGEX=/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/;const e=n.DEFAULTS.videoInsertButtons||[];delete e[e.indexOf("videoUpload")],(0,d.p)()},u=e=>{(0,a.Wy)("Kentico.InlineEditor.RichText",{init(t){const i=t.editor.querySelector(r.bV);(0,s.r)(i,l(t),t.propertyValue,!0,e)},destroy(e){(0,s.N)(e)}})}},4361:function(e,t,i){i.d(t,{AG:function(){return M},Ge:function(){return y},Up:function(){return f},jO:function(){return m}});var n=i(4425),o=i.n(n),a=i(5494),r=i.n(a),s=i(596),c=i(696),l=i(2234);const p=/<input [^>]*data-macro-type="(query|pattern)[^>]*>/g,d=/data-macro-value="([^"]*)"/,g=/data-macro-default-value="([^"]*)"/,u=/{%\s*ResolveDynamicText\(\s*"(query|pattern)"\s*,\s*"([^"]+)"\s*,\s*"(.*?)"\s*\)\s*%}/g,y=e=>e.replace(p,((e,t)=>`{% ResolveDynamicText("${t}", "${e.match(d)[1]||""}", "${r()(e.match(g)[1]).replace(/"/g,'\\"')}") %}`)),m=(e,t)=>e.replace(u,((e,i,n,a)=>(0,l.wk)(i,n,o()(a.replace(/\\"/g,'"')),(0,c.G)(t,n)))),f=e=>e.replace(u,""),M=e=>{e.el.querySelectorAll(`.${s.mm}`).forEach((t=>{t.onclick=()=>e.kenticoMacroPlugin.showActionsPopup(t),t.onmousedown=e=>{2===e.button&&e.stopPropagation()}}))}},4077:function(e,t,i){i.d(t,{ML:function(){return g},Qj:function(){return l},Ul:function(){return p},Vr:function(){return d},Wy:function(){return s}});var n=i(6485),o=i(3855),a=i(3687);const r={},s=(e,t)=>{try{c(e,t)}catch(e){return void o.v.logError(e.message)}r[e]=t},c=(e,t)=>{const i=(0,n.cQ)(a.SL.LocalizationService);if("string"!=typeof e){const e=i.getLocalization("inlineeditors.initinvalidname");throw new Error(e)}if("object"!=typeof t){const t=i.getLocalization("inlineeditors.wrongtype",e);throw new Error(t)}if(!t.hasOwnProperty("init")){const t=i.getLocalization("inlineeditors.initmissing",e);throw new Error(t)}if("function"!=typeof t.init){const t=i.getLocalization("inlineeditors.initwrongtype",e);throw new Error(t)}if(r[e]){const t=i.getLocalization("inlineeditors.duplicateregistration",e);throw new Error(t)}},l=(e,t)=>{const i=e.querySelectorAll("[data-inline-editor]"),s=(0,n.cQ)(a.SL.LocalizationService),c={cultureCode:s.getCultureCode(),getString:s.getLocalizationWithoutPrefix};for(const e of i){const i=e.dataset.inlineEditor,n=r[i];if(!n){const e=s.getLocalization("inlineeditors.notregistered",i);o.v.logError(e);continue}const a=e.dataset.propertyName;if(a&&a.length)try{n.init({editor:e,propertyName:a,localizationService:c,propertyValue:t[a]})}catch(e){o.v.logException(e)}else{const e=s.getLocalization("inlineeditors.missingpropertyname",i);o.v.logError(e)}}},p=e=>{u(e,"dragStart")},d=e=>{u(e,"drop")},g=e=>{u(e,"destroy")},u=(e,t)=>{const i=e.querySelectorAll("[data-inline-editor]");for(const e of i){const i=e.dataset.inlineEditor,n=r[i];if(n.hasOwnProperty(t)){const i=n[t],o={editor:e};i.call(i,o)}}}},6797:function(e,t,i){i.d(t,{CO:function(){return m},Dh:function(){return d},LG:function(){return u},bQ:function(){return f},wB:function(){return T},wR:function(){return g},zU:function(){return y}});var n=i(903),o=i(7307),a=i(1496),r=i(3687),s=i(8885),c=i(6520),l=i(691);const p=[],d=(e,t=[],i=0)=>(n,o,{localizationService:a})=>{M(e);const{title:r,url:s,data:d,theme:g,width:u,maximized:y,showFooter:m,applyButtonText:f,cancelButtonText:T}=D(e,a);p.push({applyCallback:e.applyCallback,cancelCallback:e.cancelCallback||(()=>null)});n((0,new c.G(I).openModalDialog)({componentIdentifier:`CustomDialog${p.length}`,dialogType:l.W.Custom,dialogTitle:r,dialogMarkupUrl:s,dialogTabs:t,activeTabIndex:i,dialogMarkupModel:d,dialogTheme:g,dialogWidth:u,maximized:y,showFooter:m,applyButtonText:f,cancelButtonText:T}))},g=e=>(t,i)=>{const n=i().modalDialogs.dialogs.length-1;t(s.vp(n,e))},u=(e,t=m)=>async(i,n,{logger:o})=>{try{const o=await p[p.length-1].applyCallback(e);if(o&&!1===o.closeDialog)return;const a=n().modalDialogs.dialogs.length-1;i(t(a)),p.pop()}catch(e){o.logException(e)}},y=(e,t=m)=>async(i,n,{logger:o})=>{try{await p[p.length-1].cancelCallback(e)}catch(e){o.logException(e)}finally{const e=n().modalDialogs.dialogs.length-1;i(t(e)),p.pop()}},m=e=>(t,i,{messaging:n})=>{n.postMessage(r.lA.CLOSE_MODAL_DIALOG,null,"*"),t(s.CO(e))},f=()=>(e,t)=>{const i=t().modalDialogs.dialogs;return i.length<=0||i[i.length-1].type!==l.W.Custom?null:(0,n.A)(i[i.length-1].model)},M=e=>{if(!e.url||!e.applyCallback)throw new TypeError("Passed options do not have required properties.");if("function"!=typeof e.applyCallback)throw new TypeError("applyCallback is not an instance of a Function type.");if(e.cancelCallback&&"function"!=typeof e.cancelCallback)throw new TypeError("cancelCallback is not an instance of a Function type.");if("string"!=typeof e.url)throw new TypeError("url is not of the type string.");if(e.title&&"string"!=typeof e.title)throw new TypeError("title is not of the type string.");if(e.theme&&-1===Object.values(r.Sx).indexOf(e.theme))throw new TypeError("theme does not match any of the existing dialog themes.");if(void 0!==e.width&&("string"!=typeof e.width||!e.width.endsWith("px")&&!e.width.endsWith("%")))throw new TypeError("width must be represented by 'XXXpx' or 'XX%' string values.");if(void 0!==e.maximized&&"boolean"!=typeof e.maximized)throw new TypeError("maximized must be of type boolean.");if(void 0!==e.showFooter&&"boolean"!=typeof e.showFooter)throw new TypeError("showFooter must be of type boolean.")},D=(e,t)=>{const i={showFooter:!0,width:"66%",maximized:!1,applyButtonText:t.getLocalization("modaldialog.buttons.apply"),cancelButtonText:t.getLocalization("modaldialog.buttons.cancel")};return a.UI.assignDefined(i,e)},I=e=>({title:e.dialogTitle,markupUrl:e.dialogMarkupUrl,model:e.dialogMarkupModel,theme:e.dialogTheme}),T=(e,t,i)=>async(n,a,{logger:r})=>{try{const a=await(0,o.q)(t,i);n(s.dO(e,a))}catch(e){r.logException(e)}}},6013:function(e,t,i){i.d(t,{PB:function(){return l},R6:function(){return d},X6:function(){return g}});var n=i(8999),o=i(5895),a=i(1945),r=i(4611),s=i(9813),c=i(9069);const l=(e,t,i,n=null,r=null,l=0)=>(d,g)=>{const u=(0,a.m9)(i);let y,m=c.lD.Center,f=c.nl.Bottom,M=c.Ce.Single,D=0;if([c.GI.AddSection,c.GI.AddWidget].includes(t)){const{metadata:s,editableAreasConfiguration:d,widgetZonesConfiguration:u,zones:I,editableAreas:T}=g(),h=(0,o.D)(t,s,d[n],u[r]);[y,M]=p(h.length+l,t),m=(0,a.cx)(i,y,a.tK.Percent),f=(0,a.ME)(i),D=t===c.GI.AddWidget?e!==r?I[r].widgets.indexOf(e):0:T[n].sections.indexOf(e)}d((0,s.PB)(e,m,f,t,u,n,r,M,D))},p=(e,t)=>{switch(!0){case e<=5:return[n.zG,c.Ce.Single];case e<=12||t===c.GI.AddSection:return[n.qg,c.Ce.Double];case e>12:return[n.Yp,c.Ce.Quadruple]}},d=e=>(t,i)=>{const{editableAreasConfiguration:n,metadata:a,popup:r,widgetZonesConfiguration:c}=i();let l=g(n,c,a,r.areaIdentifier,r.zoneIdentifier);e&&(l=(0,o.d)(l,e)),t((0,s.Vu)(l)),t((0,s.R6)(e))},g=(e,t,i,n,a)=>{const s=(0,r.$v)();if(!s.length)return[];const l=e[n],p=t[a],d=(0,o.D)(c.GI.AddWidget,i,l,p),g=new Map(d.map((e=>[e.key,e]))),u=s.map((e=>g.get(e))).filter((e=>e));return u.splice(r.Hd),u}},3196:function(e,t,i){i.d(t,{Qk:function(){return y},hz:function(){return u},xj:function(){return l}});var n=i(3856),o=i(3829),a=i(3),r=i(1843),s=i(1977),c=i(6313);const l=async(e,t,i)=>{const n=(0,c.MA)(t.sections[e].zones,t.zones),o=p(n,t);0!==o.length&&await d(o,t,i)},p=(e,t)=>{const i=e=>t.markups.variants[e].isDirty,n=e.reduce(((e,n)=>{const o=t.widgets[n].type,a=t.widgets[n].variants.filter(i);return 0===a.length?e:void 0===e[o]?Object.assign(Object.assign({},e),{[o]:a}):Object.assign(Object.assign({},e),{[o]:[...e[o],...a]})}),{});return Object.entries(n)},d=async(e,t,i)=>{const o=g(e,t),a=await Promise.all(o),r=(0,n.A)(e,(([e,t])=>t)).reduce(((e,t,i)=>(e[t]=a[i],e)),{});i((0,s.W)(r))},g=(e,t)=>(0,n.A)(e,(([e,i])=>{const n=t.metadata.widgets[e].markupUrl;return i.map((e=>{const i=t.widgetVariants[e].properties;return a.U6(n,i)}))})),u=async(e,t,i=null,n=null)=>{const s=e.metadata.sections[t];!0===s.hasProperties&&null===n&&(n=await a.yx(s.defaultPropertiesUrl));const c=await a.U6(s.markupUrl,n),l=(0,r.hR)(c),p={identifier:i||(0,o.A)(),type:t,properties:n,zones:[]},d=(0,r.N3)(l.markup);d.forEach((e=>p.zones.push(e.identifier)));const{markup:g,restrictions:u}=(0,r.OL)(l.markup,p.zones);return{section:p,markup:{markup:g},widgetZones:d,widgetRestrictions:u}},y=(e,t,i,n)=>{const o={source:e.zones.reduce(((e,t)=>(e[t]=n.zones[t].name,e)),{}),target:i.reduce(((e,{identifier:t,name:i})=>(e[t]=i,e)),{})};return(0,c.QT)(m(e.zones,o.source),m(t.zones,o.target),n.zones)},m=(e,t)=>e.map((e=>({identifier:e,name:t[e]})))},7723:function(e,t,i){i.d(t,{Bn:function(){return c},Uf:function(){return l},hB:function(){return p},tH:function(){return d}});var n=i(8542),o=i(6313),a=i(1496),r=i(4670),s=i(3196);const c=(e,t,i)=>async(n,o)=>{const{section:a,markup:c,widgetZones:l,widgetRestrictions:p}=await(0,s.hz)(o(),e);n(r.Bn(a,t,i,c,l,p))},l=(e,t)=>async(i,c)=>{const l=c(),p=l.sections[e],d=(0,o.MA)(p.zones,l.zones),g=Object.values((0,n.A)(l.widgets,d));if(1===l.editableAreas[t].sections.length){const{section:n,markup:o,widgetZones:c,widgetRestrictions:d}=await(0,s.hz)(l,l.editableAreasConfiguration[t].defaultSection,e);i(r.k7(p,n,o,a.Qc.toRecord(c,"identifier"),d,g))}else i(r.Uf(p,t,g))},p=(e,t,i,n)=>async(o,a)=>{const c=a();if(await(0,s.xj)(e,c,o),1===c.editableAreas[t].sections.length){const{section:e,markup:i,widgetZones:n,widgetRestrictions:a}=await(0,s.hz)(c,c.editableAreasConfiguration[t].defaultSection);o(r.Bn(e,t,0,i,n,a))}o(r.hB(e,t,i,n))},d=(e,t)=>async(i,n,o)=>{try{const o=n(),a=o.sections[e],{section:c,markup:l,widgetZones:p,widgetRestrictions:d}=await(0,s.hz)(o,a.type,e,t);await(0,s.xj)(e,o,i);const g=(0,s.Qk)(a,c,p,o);i(r.k7(a,c,l,g,d))}catch(e){o.logger.logException(e)}}},680:function(e,t,i){i.d(t,{CO:function(){return l.CO},wB:function(){return l.wB},PB:function(){return s.PB},_j:function(){return r},R6:function(){return s.R6},tH:function(){return p.tH},Uq:function(){return c.Uq}});var n=i(3),o=i(5723),a=i(1977);const r=(e,t)=>async(i,r)=>{const{markups:s,widgets:c,metadata:l,widgetVariants:p,displayedWidgetVariants:d}=r(),g=d[e];if(s.variants[g].isDirty){const t=c[e].type,o=await n.U6(l.widgets[t].markupUrl,p[g].properties);i((0,a.W)({[g]:o}))}i((0,o._)(t,e))};var s=i(6013),c=i(9177),l=i(6797),p=i(7723)},9069:function(e,t,i){i.d(t,{Ce:function(){return r},GI:function(){return a},WV:function(){return s.W},lD:function(){return n},nl:function(){return o}});var n,o,a,r,s=i(691);!function(e){e.Center="center",e.Left="left",e.Right="right"}(n||(n={})),function(e){e.Top="top",e.Bottom="bottom"}(o||(o={})),function(e){e.AddWidget="addWidget",e.AddSection="addSection",e.ChangeSection="changeSection",e.Personalization="personalization"}(a||(a={})),function(e){e.Single="single",e.Double="double",e.Quadruple="quadruple"}(r||(r={}))},8053:function(e,t,i){i.d(t,{CT:function(){return a},Ro:function(){return s},Xj:function(){return o},aC:function(){return l},aK:function(){return r},je:function(){return c}});var n=i(7475);const o=(0,n.createAction)("widgetSelection/SELECT",(e=>({widgetIdentifier:e})))(),a=(0,n.createAction)("widgetSelection/UNSELECT")(),r=(0,n.createAction)("widgetSelection/FREEZE")(),s=(0,n.createAction)("widgetSelection/THAW")(),c=(0,n.createAction)("widgetSelection/DISABLE_CLICK_AWAY")(),l=(0,n.createAction)("widgetSelection/ENABLE_CLICK_AWAY")()},4130:function(e,t,i){i(4772);var n=i(6485),o=i(1496),a=i(4077),r=(i(4741),i(9492)),s=i(7381),c=i(9149),l=i(3687),p=i(104),d=i(2310),g=function(e,t,i,n){var o,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,i,r):o(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},u=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let y=class extends d.c{constructor(){super("kentico.pagebuilder")}};y=g([(0,p._)(),u("design:paramtypes",[])],y);var m=i(1235);const f=new m.wQ.Entity("widgetVariants",{},{idAttribute:"identifier"}),M=new m.wQ.Entity("widgets",{variants:[f]},{idAttribute:"identifier"}),D=new m.wQ.Entity("zones",{widgets:[M]},{idAttribute:"identifier"}),I=new m.wQ.Entity("sections",{zones:[D]},{idAttribute:"identifier"}),T={editableAreas:[new m.wQ.Entity("editableAreas",{sections:[I]},{idAttribute:"identifier"})]};var h=i(829);const N={page:T};var O=function(e,t,i,n){var o,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,i,r):o(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r};let w=class{normalizeConfiguration(e){const t=(0,m.S8)(e,N).entities,i=o.UI.isEmpty(t)?{editableAreas:{},sections:{},zones:{},widgets:{},widgetVariants:{}}:t;return i.pageTemplate=e.pageTemplate,i}denormalizeConfiguration(e){return(0,m.NU)({page:{editableAreas:Object.keys(e.editableAreas)},pageTemplate:e.pageTemplate},N,e)}normalizeMetadata(e){const t=(0,m.S8)(e,h.R).entities;return{widgets:t.widgets||{},sections:t.sections||{},personalizationConditionTypes:t.personalizationConditionTypes||{},pageTemplates:t.pageTemplates||{}}}};w=O([(0,p._)()],w);var j=i(1880),b=i(3531),z=i(9682);const A=async()=>{var e;const t=(await z.LV.post(z.q$.clipboard.getEndpoint)).data;let i;return t&&(i=null!==(e=JSON.parse(t.data))&&void 0!==e?e:{copiedWidgets:[],copiedSections:[]}),i},S=(e,t)=>{const i={copiedSections:t,copiedWidgets:e},n=z.q$.clipboard.storeEndpoint,o={data:JSON.stringify(i)};return z.LV.post(n,o,{headers:{"Content-Type":"application/json"}})};var L=function(e,t,i,n){var o,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,i,r):o(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r};let E=class extends j.U{processIncomingMessage(e,t){return async i=>{await super.processIncomingMessage(e,t)(i),i.data.msg===l.lA.CHANGE_TEMPLATE&&(await(async(e,t)=>{const i=z.q$.pageTemplate.changeTemplateEndpoint,n={[z.q$.constants.editingInstanceHeader]:t};return z.LV.post(i,e,{headers:n})})(i.data.template,i.data.guid),(0,b.postMessage)(l.lA.TEMP_CONFIGURATION_STORED,null,i.origin))}}};E=L([(0,p._)()],E);const v=new r.m({skipBaseClassChecks:!0});v.bind(l.SL.LocalizationService).to(y),v.bind(l.SL.NormalizerService).to(w),v.bind(l.SL.PageConfigurationService).to(s.L),v.bind(l.SL.PopUpElementsService).to(c.X),v.bind(l.SL.MessagingService).to(E);var C=i(2717),k=i(3079),x=i(3502),Q=i(7934),P=i(6797);const W=(e,t,i)=>{const n=1!==t?"multiple":"single";let o;switch(e){case"attachment":o="kentico.components.attachmentselector.dialogtitle";break;case"media":o="kentico.components.mediafileselector.dialogtitle";break;case"page":o="kentico.components.pageselector.dialogtitle"}return i.getLocalizationWithoutPrefix(`${o}.${n}`)};var U=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i};const Y=e=>{if("object"!=typeof e)throw new TypeError("Attachment selector options parameter must be an object.");if("function"!=typeof e.applyCallback)throw new TypeError("The 'applyCallback' parameter must be an instance of a Function type.");if(e.selectedValues&&!Array.isArray(e.selectedValues))throw new TypeError("The 'selectedValues' parameter must be an instance of an Array type.");if(e.maxFilesLimit&&"number"!=typeof e.maxFilesLimit&&e.maxFilesLimit<0)throw new TypeError("The 'maxFilesLimit' parameter must be of type number, greater or equal to 0.");if(e.allowedExtensions&&"string"!=typeof e.allowedExtensions)throw new TypeError("The 'allowedExtensions' parameter must be of type string.")},V=(e,t)=>{const i={title:W("attachment",e.maxFilesLimit||1,t),applyButtonText:t.getLocalizationWithoutPrefix("kentico.components.attachmentselector.dialog.button.apply"),maxFilesLimit:1,selectedValues:[]};return o.UI.assignDefined(i,e)};var F=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i};const R=["page","media","attachment"],B=({dispatch:e,localizationService:t},i,n)=>{const{activeTabIndex:o,selectedItemsLimit:a,tabs:r}=n,s=r.map((e=>e.dialogTabType));if(s.length>1)e((0,P.Dh)(i,r.map((e=>e.dialogTab)),o));else{const n=s[0];"page"===n&&(i=Object.assign(Object.assign({},i),{data:{pages:Object.assign(Object.assign({},i.data.pages),{maximized:!1})},maximized:!1})),e((0,P.Dh)(Object.assign(Object.assign({},i),{title:W(n,a,t)})))}},G=({defaultTab:e,selectedItems:t})=>t&&t.type||e,_=async e=>{const t=e.document.querySelector("kentico-attachment-selector-dialog,  kentico-page-selector, kentico-media-files");if(!t)return null;if("getSelectedAttachments"in t){const e=t;return{type:"attachment",items:await e.getSelectedAttachments()}}if((e=>"getSelectedPage"in e)(t)){const e=t;return{type:"page",items:await e.getSelectedPage()}}if((e=>"getSelectedFiles"in e)(t)){const e=t;return{type:"media",items:await e.getSelectedFiles()}}},Z=(e,t,{pageIdentifier:i},n)=>{const{selectedItemsLimit:o,attachmentOptions:a,mediaOptions:r,pageOptions:s,selectedItems:c}=t,l=c&&c.items||[];switch(e){case"attachment":return{allowedExtensions:a&&a.allowedExtensions,maxFilesLimit:o,pageIdentifier:i,selectedValues:n?l.map((e=>e.value)):[]};case"media":return{allowedExtensions:r&&r.allowedExtensions,libraryName:r&&r.libraryName,maxFilesLimit:o,selectedValues:n?l.map((e=>({fileGuid:e.value}))):[]};case"page":return{identifierMode:s&&s.identifierMode?s.identifierMode:"guid",selectedValues:n?l.map((e=>({identifier:e.value}))):[],maximized:!0,maxItemsLimit:o}}},$=e=>{if("object"!=typeof e)throw new TypeError("Page selector needs to have a configuration object defined.");if("function"!=typeof e.applyCallback)throw new TypeError("The 'applyCallback' parameter must be an instance of a Function type.");if(e.tabs){if(!Array.isArray(e.tabs))throw new TypeError("The 'tabs' parameter must be an instance of an array of Strings.");if(e.tabs.length>R.length)throw new TypeError(`Maximum allowed length of 'tabs' array is restricted to ${R.length}.`);const t=o.Qc.getUniqueValues(e.tabs);if(t.filter((e=>-1===R.indexOf(e))).length)throw new TypeError(`The 'tabs' parameter elements are restricted to values: ${R.join(", ")}`);if(t.length<e.tabs.length)throw new TypeError("Each tab name is allowed to appear in the 'tabs' array only once")}if(e.defaultTab){if("string"!=typeof e.defaultTab)throw new TypeError("The 'defaultTab' parameter must be a String.");if(e.tabs&&-1===e.tabs.indexOf(e.defaultTab))throw new TypeError("If 'defaultTab' is specified its value must be an element of a set defined by 'tabs' option.")}if(e.selectedItemsLimit&&"number"!=typeof e.selectedItemsLimit)throw new TypeError("The 'selectedItemsLimit' parameter is not of the type Number.");if(e.selectedItems){if("object"!=typeof e.selectedItems||Array.isArray(e.selectedItems))throw new TypeError("The 'selectedItems' parameter must be an instance of an Object.");if("string"!=typeof e.selectedItems.type||-1===R.indexOf(e.selectedItems.type))throw new TypeError(`The 'selectedItems.type' parameter elements are restricted to values: ${R.join(", ")}.`);if(!Array.isArray(e.selectedItems.items))throw new TypeError("The 'selectedItems.items' parameter must be an instance of an Array type.");if(e.selectedItems.items.some((e=>!e.hasOwnProperty("value"))))throw new TypeError("All objects specified in 'selectedItems.items' collection must have a property called 'value'.")}if(e.mediaOptions){if("object"!=typeof e.mediaOptions||Array.isArray(e.mediaOptions))throw new TypeError("The 'mediaOptions' parameter must be an instance of an Object.");if(e.mediaOptions.libraryName&&"string"!=typeof e.mediaOptions.libraryName)throw new TypeError("The 'mediaOptions.libraryName' parameter must be an instance of a String.");if(e.mediaOptions.allowedExtensions&&"string"!=typeof e.mediaOptions.allowedExtensions)throw new TypeError("The 'mediaOptions.allowedExtensions' parameter must be an instance of a String.")}if(e.pageOptions){if("object"!=typeof e.pageOptions||Array.isArray(e.pageOptions))throw new TypeError("The 'pageOptions' parameter must be an instance of an Object.");if(e.pageOptions.rootPath&&"string"!=typeof e.pageOptions.rootPath)throw new TypeError("The 'pageOptions.rootPath' parameter must be an instance of a String.")}if(e.attachmentOptions){if("object"!=typeof e.attachmentOptions||Array.isArray(e.attachmentOptions))throw new TypeError("The 'attachmentOptions' parameter must be an instance of an Object.");if(e.attachmentOptions.allowedExtensions&&"string"!=typeof e.attachmentOptions.allowedExtensions)throw new TypeError("The 'attachmentOptions.allowedExtensions' parameter must be an instance of a String.")}},H=(e,t)=>{const i={title:t.getLocalizationWithoutPrefix("kentico.components.contentselector.dialogtitle"),applyButtonText:t.getLocalizationWithoutPrefix("kentico.components.contentselector.dialog.button.apply"),tabs:R,defaultTab:e.tabs?e.tabs[0]:R[0],selectedItemsLimit:1,maximized:!0};return o.UI.assignDefined(i,e)},q=(e,{attachmentOptions:t,pageOptions:i,mediaOptions:n},o,a)=>{switch(e){case"attachment":let e=o.attachmentSelector;return(null==t?void 0:t.allowedExtensions)&&(e=Q.z(e,"allowedExtensions",encodeURIComponent(t.allowedExtensions))),{iconClassName:"icon-w-document-attachments",title:a.getLocalizationWithoutPrefix("kentico.components.contentselector.attachmentstabtitle"),url:e};case"page":return{iconClassName:"icon-w-documents",title:a.getLocalizationWithoutPrefix("kentico.components.contentselector.pagestabtitle"),url:(null==i?void 0:i.rootPath)?Q.z(o.pageSelector,"rootPath",i.rootPath):o.pageSelector};case"media":let r=o.mediaFilesSelector;return(null==n?void 0:n.allowedExtensions)&&(r=Q.z(r,"allowedExtensions",encodeURIComponent(n.allowedExtensions))),(null==n?void 0:n.libraryName)&&(r=Q.z(r,"libraryName",encodeURIComponent(n.libraryName))),{iconClassName:"icon-w-media-gallery",title:a.getLocalizationWithoutPrefix("kentico.components.contentselector.mediatabtitle"),url:r}}};var X=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i};const J=e=>{if(void 0===e)throw new TypeError("Media files selector needs to have a configuration object defined.");if("function"!=typeof e.applyCallback)throw new TypeError("The 'applyCallback' parameter must be an instance of a Function type.");if(e.libraryName&&"string"!=typeof e.libraryName)throw new TypeError("The 'libraryName' parameter is not of the type string.");if(e.maxFilesLimit&&"number"!=typeof e.maxFilesLimit)throw new TypeError("The 'maxFilesLimit' parameter is not of the type number.")};var K=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i};const ee=e=>{if(void 0===e)throw new TypeError("Page selector needs to have a configuration object defined.");if("function"!=typeof e.applyCallback)throw new TypeError("The 'applyCallback' parameter must be an instance of a Function type.");if(void 0!==e.selectedValues){if(void 0===e.identifierMode)throw new TypeError("The 'selectedValues' parameter can be used only together with the 'identifierMode' specified.");if(!(e.selectedValues instanceof Array))throw new TypeError("The 'selectedValues' parameter must be an array.");if(e.selectedValues.length&&void 0===e.selectedValues[0].identifier)throw new TypeError("The 'selectedValues' parameter must contain objects with an 'identifier' variable specified.");if("guid"!==e.identifierMode&&"path"!==e.identifierMode)throw new TypeError('The \'identifierMode\' parameter must be one of the following values: "guid" or "path"')}if(void 0!==e.rootPath&&e.rootPath.lastIndexOf("/")===e.rootPath.length-1&&e.rootPath.length>1)throw new TypeError("The 'rootPath' cannot end with a slash character unless it points at the site root.")},te=(e,t)=>{const i={title:W("page",1,t),identifierMode:"guid",applyButtonText:t.getLocalizationWithoutPrefix("kentico.components.pageselector.dialog.button.apply"),maximized:!1};return o.UI.assignDefined(i,e)},ie=[({namespace:e,config:t,dispatch:i,localizationService:n})=>{(e.mediaFilesSelector=e.mediaFilesSelector||{}).open=e=>{J(e);const{libraryName:o="",maxFilesLimit:a=1,allowedExtensions:r=null,selectedValues:s=[],applyCallback:c,maximized:l=!0}=e,p=X(e,["libraryName","maxFilesLimit","allowedExtensions","selectedValues","applyCallback","maximized"]);let d=Q.z(t.selectors.dialogEndpoints.mediaFilesSelector,"libraryName",encodeURIComponent(o));r&&(d=Q.z(d,"allowedExtensions",encodeURIComponent(r))),i((0,P.Dh)(Object.assign({title:e.title||W("media",a,n),data:{media:{libraryName:o,maxFilesLimit:a,allowedExtensions:r,selectedValues:s}},url:d,applyCallback:async e=>{const t=e.document.querySelector("kentico-media-files"),i=null!==t?await t.getSelectedFiles():[];return c(i)},maximized:l,applyButtonText:n.getLocalizationWithoutPrefix("kentico.components.mediafileselector.dialog.button.apply")},p)))}},({namespace:e,config:t,dispatch:i,localizationService:n})=>{e.pageSelector=e.pageSelector||{},e.pageSelector.open=e=>{ee(e);const o=te(e,n),{identifierMode:a,selectedValues:r,applyCallback:s,rootPath:c}=o,l=K(o,["identifierMode","selectedValues","applyCallback","rootPath"]);let p=t.selectors.dialogEndpoints.pageSelector;void 0!==c&&(p=Q.z(p,"rootPath",c));const d={selectedValues:r,identifierMode:a,maximized:l.maximized,maxItemsLimit:1};i((0,P.Dh)(Object.assign({url:p,async applyCallback(e){const t=e.document.querySelector("kentico-page-selector"),i=await t.getSelectedPage();return s(i)},data:{pages:d}},l)))}},({namespace:e,config:t,dispatch:i,localizationService:n})=>{e.attachmentSelector=e.attachmentSelector||{},e.attachmentSelector.open=e=>{Y(e);const o=V(e,n),{applyCallback:a,selectedValues:r,maxFilesLimit:s,allowedExtensions:c}=o,l=U(o,["applyCallback","selectedValues","maxFilesLimit","allowedExtensions"]);let p=t.selectors.dialogEndpoints.attachmentSelector;c&&(p=(0,Q.z)(t.selectors.dialogEndpoints.attachmentSelector,"allowedExtensions",c)),i((0,P.Dh)(Object.assign({url:p,data:{attachments:{selectedValues:r.map((e=>e.fileGuid)),pageIdentifier:t.pageIdentifier,maxFilesLimit:s,allowedExtensions:c}},async applyCallback(e){const t=e.document.querySelector("kentico-attachment-selector-dialog"),i=await t.getSelectedAttachments();return a(i)},maximized:!0},l)))}},e=>{const{config:t,namespace:i,localizationService:n}=e;i.contentSelector=i.contentSelector||{},i.contentSelector.open=i=>{$(i);const o=H(i,n),{applyCallback:a,tabs:r,defaultTab:s,selectedItemsLimit:c,attachmentOptions:l,mediaOptions:p,pageOptions:d,selectedItems:g}=o,u=F(o,["applyCallback","tabs","defaultTab","selectedItemsLimit","attachmentOptions","mediaOptions","pageOptions","selectedItems"]),y=G({tabs:r,defaultTab:s,selectedItems:g}),m=r.indexOf(y),f=r.map((e=>({dialogTabType:e,dialogTab:q(e,{attachmentOptions:l,pageOptions:d,mediaOptions:p},t.selectors.dialogEndpoints,n)}))),M=e=>Z(e,{attachmentOptions:l,mediaOptions:p,pageOptions:d,selectedItemsLimit:c,selectedItems:g},t,e===y),D=Object.assign({url:f[m].dialogTab.url,applyCallback:async e=>a(await _(e)),data:{attachments:M("attachment"),pages:M("page"),media:M("media")}},u);B(e,D,{selectedItemsLimit:c,tabs:f,activeTabIndex:m})}}];var ne=i(9069),oe=i(7229),ae=i(6034),re=i(1040),se=i(8999);class ce extends re.E{constructor(e,t,i,n,o,a,r,s,c,l){super(t,i,n,o,se.gE,a,c),this.pageIdentifier=e,this.applicationPath=t,this.configurationEndpoints=i,this.metadataEndpoint=n,this.allowedOrigins=o,this.constants=a,this.featureSet=r,this.pageTemplate=s,this.selectors=c,this.clipboard=l}validate(){if(0===this.pageIdentifier)throw new Error((0,n.cQ)(l.SL.LocalizationService).getLocalization("notinitialized"))}getComponentMarkupData(e){return{postedData:e,pageIdentifier:this.pageIdentifier}}}var le=i(1829),pe=i(1265),de=i(9060),ge=i(5612),ue=i(2079),ye=i(8776),me=i(8021),fe=i(7475),Me=i(2981),De=i(5964);const Ie=(0,fe.createAction)("widgetVariants/CHANGE_PRIORITY",((e,t)=>({widgetIdentifier:e,variants:t})))(),Te=(0,fe.createAction)("pageTemplates/UPDATE_PROPERTIES",((e,t)=>({identifier:e,properties:t})))(),he=(0,fe.createAction)("clipboard/COPY_WIDGET",(e=>({widgetCopy:e})))(),Ne=(0,fe.createAction)("clipboard/COPY_SECTION",(e=>({sectionCopy:e})))(),Oe=(0,fe.createAction)("clipboard/PASTE_WIDGET",((e,t,i,n,o,a)=>({widget:e,variants:t,markups:i,zoneIdentifier:n,position:o,variantIndexToSelect:a})))(),we=(0,fe.createAction)("clipboard/SET_PASTABLE_WIDGETS",(e=>({pastableWidgets:e})))(),je=(0,fe.createAction)("clipboard/SET_PASTABLE_SECTIONS",(e=>({pastableSections:e})))(),be=(0,fe.createAction)("clipboard/LOAD",(e=>({copiedObjects:e})))(),ze=(0,fe.createAction)("clipboard/DELETE_WIDGET",(e=>({clipboardItemIdentifier:e})))(),Ae=(0,fe.createAction)("clipboard/DELETE_SECTION",(e=>({clipboardItemIdentifier:e})))(),Se=(0,fe.createAction)("clipboard/ADD_RESTRICTED_WIDGETS",(e=>({widgetCopies:e})))(),Le=(0,fe.createAction)("clipboard/REMOVE_RESTRICTED_WIDGET",(e=>({clipboardEntryIdentifier:e})))(),Ee=(0,fe.createAction)("clipboard/SHOW_THUMBNAIL",((e,t,i)=>({clipboardEntryIdentifier:e,top:t,left:i})))(),ve=(0,fe.createAction)("clipboard/HIDE_THUMBNAIL",(e=>({clipboardEntryIdentifier:e})))(),Ce={identifier:null,properties:{}};var ke=i(6996),xe=i(2530);var Qe=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i};const Pe={widgets:{copiedWidgets:[],restrictedWidgets:[],pastableWidgets:[]},sections:{copiedSections:[],pastableSections:[]},thumbnails:{}};var We=i(4090);var Ue=i(3506);const Ye={sections:{},variants:{}};var Ve=i(6160);var Fe=i(1376);const Re=(0,le.HY)(Object.assign(Object.assign({},me.X),{config:(e=null)=>e,pageTemplate:(e=Ce,t)=>t.type===(0,fe.getType)(Te)?Object.assign(Object.assign({},e),{properties:t.payload.properties}):e,widgets:(e,t)=>{switch(e=(0,xe.Q)(e,t),t.type){case(0,fe.getType)(Me.pY):{const i=e[t.payload.widgetIdentifier];return Object.assign(Object.assign({},e),{[t.payload.widgetIdentifier]:Object.assign(Object.assign({},i),{conditionType:t.payload.conditionType||i.conditionType,variants:[...i.variants,t.payload.variant.identifier]})})}case(0,fe.getType)(Ie):{const{widgetIdentifier:i,variants:n}=t.payload,o=e[i],{variants:a}=o;if((0,ke.A)(n,a))return e;if((0,ke.A)([...n].sort(),[...a.slice(1)].sort()))return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},o),{variants:[a[0],...n]})});throw new Error("Changing variants priority can only modify their order.")}case(0,fe.getType)(Oe):return Object.assign(Object.assign({},e),{[t.payload.widget.identifier]:t.payload.widget});default:return e}},highlightedSection:(e,t)=>{switch(e=(0,De.j)(e,t),t.type){case(0,fe.getType)(Me.oq):return t.payload.type!==ne.WV.SectionProperties?e:Object.assign(Object.assign({},e),{highlightBorder:!0,freezeHighlight:!0});case(0,fe.getType)(Me.CO):return e.freezeHighlight?Object.assign(Object.assign({},e),{highlightBorder:!1,freezeHighlight:!1}):e;default:return e}},clipboard:(e=Pe,t)=>{switch(t.type){case(0,fe.getType)(he):return Object.assign(Object.assign({},e),{widgets:Object.assign(Object.assign({},e.widgets),{copiedWidgets:[t.payload.widgetCopy,...e.widgets.copiedWidgets.slice(0,9)]})});case(0,fe.getType)(Ne):return Object.assign(Object.assign({},e),{sections:Object.assign(Object.assign({},e.sections),{copiedSections:[t.payload.sectionCopy,...e.sections.copiedSections.slice(0,9)]})});case(0,fe.getType)(Oe):return Object.assign(Object.assign({},e),{widgets:Object.assign({},e.widgets),thumbnails:{}});case(0,fe.getType)(Se):return Object.assign(Object.assign({},e),{widgets:Object.assign(Object.assign({},e.widgets),{restrictedWidgets:[...e.widgets.restrictedWidgets,...t.payload.widgetCopies]})});case(0,fe.getType)(we):return Object.assign(Object.assign({},e),{widgets:Object.assign(Object.assign({},e.widgets),{pastableWidgets:t.payload.pastableWidgets})});case(0,fe.getType)(je):return Object.assign(Object.assign({},e),{sections:Object.assign(Object.assign({},e.sections),{pastableSections:t.payload.pastableSections})});case(0,fe.getType)(be):return Object.assign(Object.assign({},e),{widgets:Object.assign(Object.assign({},e.widgets),{copiedWidgets:t.payload.copiedObjects.copiedWidgets}),sections:Object.assign(Object.assign({},e.sections),{copiedSections:t.payload.copiedObjects.copiedSections})});case(0,fe.getType)(ze):return Object.assign(Object.assign({},e),{widgets:Object.assign(Object.assign({},e.widgets),{copiedWidgets:e.widgets.copiedWidgets.filter((e=>e.clipboardItemIdentifier!==t.payload.clipboardItemIdentifier))}),thumbnails:{}});case(0,fe.getType)(Ae):return Object.assign(Object.assign({},e),{sections:Object.assign(Object.assign({},e.sections),{copiedSections:e.sections.copiedSections.filter((e=>e.clipboardItemIdentifier!==t.payload.clipboardItemIdentifier))}),thumbnails:{}});case(0,fe.getType)(Le):const{clipboardEntryIdentifier:i}=t.payload;return Object.assign(Object.assign({},e),{widgets:Object.assign(Object.assign({},e.widgets),{restrictedWidgets:e.widgets.restrictedWidgets.filter((e=>e.clipboardItemIdentifier!==i))})});case(0,fe.getType)(Ee):return Object.assign(Object.assign({},e),{thumbnails:Object.assign(Object.assign({},e.thumbnails),{[t.payload.clipboardEntryIdentifier]:{top:t.payload.top,left:t.payload.left}})});case(0,fe.getType)(ve):const n=e.thumbnails,o=t.payload.clipboardEntryIdentifier,a=(n[o],Qe(n,["symbol"==typeof o?o:o+""]));return Object.assign(Object.assign({},e),{thumbnails:a});default:return e}},widgetVariants:(e={},t)=>(e=(0,We.H)(e,t),t.type===(0,fe.getType)(Oe)?Object.assign(Object.assign({},e),t.payload.variants.reduce(((e,t)=>(e[t.identifier]=t,e)),{})):e),markups:(e=Ye,t)=>(e=(0,Ue.S)(e,t),t.type===(0,fe.getType)(Oe)?Object.assign(Object.assign({},e),{variants:Object.assign(Object.assign({},e.variants),t.payload.variants.reduce(((e,i,n)=>(e[i.identifier]={markup:t.payload.markups[n],isDirty:!1},e)),{}))}):e),zones:(e={},t)=>{if(e=(0,Ve.Q)(e,t),t.type===(0,fe.getType)(Oe)){const{widget:i,zoneIdentifier:n,position:a}=t.payload;return Object.assign(Object.assign({},e),{[n]:Object.assign(Object.assign({},e[n]),{widgets:o.Qc.insertItemIntoArray(e[n].widgets,i.identifier,a)})})}return e},displayedWidgetVariants:(e={},t)=>{if(e=(0,Fe._)(e,t),t.type===(0,fe.getType)(Oe)){const{widget:i,variants:n,variantIndexToSelect:o}=t.payload;return Object.assign(Object.assign({},e),{[i.identifier]:n[o].identifier})}return e}})),Be=(e,t)=>{const i=(0,ge.Y)(t);return(0,le.y$)(Re,e,i((0,le.Tw)(pe.A.withExtraArgument((0,de.n)()),ye.G,ue.i)))};var Ge=i(1425),_e=i(2008),Ze=i(7217),$e=i(8542),He=i(7723),qe=i(3196),Xe=i(2506),Je=i(3829),Ke=i(3),et=i(2943),tt=i(4679),it=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i};const nt=e=>async(t,i)=>{const n=mt([e],i()),o=t(ct()),[a]=await Promise.all([n,o]),r=a[0];t(he(r)),await t(at(et.c.Widget,r.widgetType))},ot=e=>async(t,i)=>{const n=i(),o=await Mt(e,n);await t(ct()),t(Ne(o)),await t(at(et.c.Section,o.sectionType))},at=(e,t)=>async(i,n,{localizationService:o,logger:a,messaging:r})=>{const{clipboard:s,metadata:c}=n(),p=e===et.c.Widget,d=p?c.widgets[t].name:c.sections[t].name,g=p?"clipboard.widgets.copysuccessmessage":"clipboard.sections.copysuccessmessage";try{if(200===(await S(s.widgets.copiedWidgets,s.sections.copiedSections)).status){const e=o.getLocalization(g,d);r.postMessage(l.lA.MESSAGING_SUCCESS,e,"*")}}catch(e){a.logException(e)}},rt=e=>async(t,i,{logger:n})=>{const{clipboard:o}=i(),a=o.widgets.copiedWidgets.find((t=>t.clipboardItemIdentifier===e));a?await t(ut(a)):n.logError("Widget could not be found in the clipboard.")},st=e=>async(t,i,{logger:n})=>{const{clipboard:o}=i(),a=o.sections.copiedSections.find((t=>t.clipboardItemIdentifier===e));a?(await t(yt(a)),t((0,Me.fs)())):n.logError("Section could not be found in the clipboard.")},ct=()=>async(e,t,{logger:i})=>{try{const t=await A();return e(be(t)),t}catch(e){i.logException(e)}},lt=e=>async(t,i,{logger:n,localizationService:a,messaging:r})=>{try{const s=await A(),c=s.copiedSections,p=c.findIndex((t=>t.clipboardItemIdentifier===e));if(-1===p)return void n.logError("Section does not exists in the clipboard.");const d=o.Qc.removeItem(c,p),g=await S(s.copiedWidgets,d),{metadata:u}=i(),{name:y}=u.sections[c[p].sectionType];if(200===g.status){t(Ae(e));const i=a.getLocalization("clipboard.section.removesucessmessage",y);r.postMessage(l.lA.MESSAGING_SUCCESS,i,"*")}}catch(e){n.logException(e)}},pt=e=>async(t,i,{logger:n,localizationService:a,messaging:r})=>{try{const s=await A(),c=s.copiedWidgets,p=c.findIndex((t=>t.clipboardItemIdentifier===e));if(-1===p)return void n.logError("Widget does not exists in the clipboard.");const{metadata:d}=i(),{name:g}=d.widgets[c[p].widgetType],u=o.Qc.removeItem(c,p);if(200===(await S(u,s.copiedSections)).status){t(ze(e));const i=a.getLocalization("clipboard.widgets.removesucessmessage",g);r.postMessage(l.lA.MESSAGING_SUCCESS,i,"*")}}catch(e){n.logException(e)}},dt=e=>(t,i,{messaging:n})=>{const{clipboard:o}=i();1===o.widgets.restrictedWidgets.length&&n.postMessage(l.lA.SET_RESTRICTED_WIDGETS,!1,"*"),t(Le(e))},gt=e=>async(t,i)=>{const{clipboard:n}=i(),o=n.widgets.restrictedWidgets.find((t=>t.clipboardItemIdentifier===e));await t(ut(o)),t(dt(e))},ut=e=>async(t,i,{logger:n})=>{const{clipboard:o,popup:a,metadata:r}=i(),{widgetType:s}=e;if(!o.widgets.pastableWidgets.includes(s))return void n.logError(`Widget cannot be pasted to area '${a.areaIdentifier}'.`);t((0,Me.fs)());const c=a.componentIdentifier===a.zoneIdentifier?a.index:a.index+1,{widget:l,variants:p,markups:d,displayedVariantIndex:g}=await Dt(e,r.widgets[s].markupUrl);t(Oe(l,p,d,a.zoneIdentifier,c,g))},yt=e=>async(t,i)=>{const{popup:n,metadata:o}=i(),{sectionType:a,properties:r,zones:s}=e,c=n.index+1,{section:l,markup:p,widgetZones:d,widgetRestrictions:g}=await(0,qe.hz)(i(),a,null,r);t((0,Me.Bn)(l,n.areaIdentifier,c,p,d,g));const u=s.map((async(e,i)=>{for(const[n,a]of e.entries()){const{widget:e,variants:r,markups:s,displayedVariantIndex:c}=await Dt(a,o.widgets[a.widgetType].markupUrl);t(Oe(e,r,s,l.zones[i],n,c))}}));await Promise.all(u)},mt=async(e,t)=>{const i=ft(e,t),n=await Promise.all(e.map((e=>{const t=document.getElementById(e).querySelector(".ktc-widget-body-wrapper");return It(t)})));return i.map(((e,t)=>Object.assign({clipboardItemIdentifier:(0,Je.A)(),thumbnail:n[t]},e)))},ft=(e,t)=>{const{widgets:i,widgetVariants:n,displayedWidgetVariants:o}=t;return e.map((e=>{const{type:t,variants:a,conditionType:r}=i[e],s=a.map((e=>{const t=n[e],{identifier:i}=t;return it(t,["identifier"])})),c=o[e];return{widgetType:t,conditionType:null!=r?r:null,displayedVariantIndex:a.findIndex((e=>n[e].identifier===c)),variants:s}}))},Mt=async(e,t)=>{const{sections:i,zones:n}=t,o=i[e],a=document.getElementById(e).querySelector(".ktc-section-body-wrapper"),r=await It(a),s=o.zones.map((e=>{const i=n[e].widgets;return ft(i,t)}));return{clipboardItemIdentifier:(0,Je.A)(),sectionType:o.type,zones:s,properties:o.properties,thumbnail:r}},Dt=async(e,t)=>{const{widgetType:i,conditionType:n,variants:o,displayedVariantIndex:a}=e,r=o.map((e=>Object.assign({identifier:(0,Je.A)()},e)));return{widget:{identifier:(0,Je.A)(),type:i,conditionType:n,variants:[...r.map((e=>e.identifier))]},markups:await Promise.all(o.map((e=>Ke.U6(t,e.properties)))),variants:r,displayedVariantIndex:a}},It=async e=>{const{width:t,height:i}=e.getBoundingClientRect(),n=((e,t)=>{const i=Math.max(e,t);return i<=200?1:200/i})(t,i);try{return await(0,Xe.gO)(e,{filter:e=>{var t;return!((null===(t=e.tagName)||void 0===t?void 0:t.startsWith("KENTICO-"))||e.shadowRoot)},backgroundColor:"#fff",pixelRatio:n})}catch(e){return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjEzNiIgdmlld0JveD0iMCAwIDEyMCAxMzYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjAiIGhlaWdodD0iMTM2IiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTU2IDQxQzU2IDQzLjIwOTEgNTQuMjA5MSA0NSA1MiA0NUM0OS43OTA5IDQ1IDQ4IDQzLjIwOTEgNDggNDFDNDggMzguNzkwOSA0OS43OTA5IDM3IDUyIDM3QzU0LjIwOTEgMzcgNTYgMzguNzkwOSA1NiA0MVpNNTQgNDFDNTQgNDIuMTA0NiA1My4xMDQ2IDQzIDUyIDQzQzUwLjg5NTQgNDMgNTAgNDIuMTA0NiA1MCA0MUM1MCAzOS44OTU0IDUwLjg5NTQgMzkgNTIgMzlDNTMuMTA0NiAzOSA1NCAzOS44OTU0IDU0IDQxWiIgZmlsbD0iIzE1MTUxNSIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTQ0IDU2VjM4QzQ0IDM1LjIzODYgNDYuMjM4NiAzMyA0OSAzM0g2N0M2OS43NjE0IDMzIDcyIDM1LjIzODYgNzIgMzhWNDguOTk5TDcyIDQ5LjAwNkM3MS45OTkyIDQ5LjEzOTQgNzEuOTcyMyA0OS4yNjY2IDcxLjkyNDEgNDkuMzgyOEM3MS44NzUzIDQ5LjUwMDcgNzEuODAzIDQ5LjYxMTIgNzEuNzA3MSA0OS43MDcxQzcxLjUyNjEgNDkuODg4MSA3MS4yNzYxIDUwIDcxIDUwQzcwLjg2NDQgNTAgNzAuNzM1MSA0OS45NzMgNzAuNjE3MiA0OS45MjQxQzcwLjQ5OTMgNDkuODc1MyA3MC4zODg4IDQ5LjgwMyA3MC4yOTI5IDQ5LjcwNzFMNjYgNDUuNDE0Mkw1Ny44NDg1IDUzLjU2NTdDNTcuMzc5OSA1NC4wMzQzIDU2LjYyMDEgNTQuMDM0MyA1Ni4xNTE1IDUzLjU2NTdMNTIgNDkuNDE0Mkw0NiA1NS40MTQyVjU2QzQ2IDU3LjY1NjkgNDcuMzQzMSA1OSA0OSA1OUg2MEM2MC41NTIzIDU5IDYxIDU5LjQ0NzcgNjEgNjBDNjEgNjAuNTUyMyA2MC41NTIzIDYxIDYwIDYxSDQ5QzQ2LjIzODYgNjEgNDQgNTguNzYxNCA0NCA1NlpNNDkgMzVDNDcuMzQzMSAzNSA0NiAzNi4zNDMxIDQ2IDM4VjUyLjU4NThMNTEuMTUxNSA0Ny40MzQzQzUxLjYyMDEgNDYuOTY1NyA1Mi4zNzk5IDQ2Ljk2NTcgNTIuODQ4NSA0Ny40MzQzTDU3IDUxLjU4NThMNjUuMTUxNSA0My40MzQzQzY1LjYyMDEgNDIuOTY1NyA2Ni4zNzk5IDQyLjk2NTcgNjYuODQ4NSA0My40MzQzTDcwIDQ2LjU4NThWMzhDNzAgMzYuMzQzMSA2OC42NTY5IDM1IDY3IDM1SDQ5WiIgZmlsbD0iIzE1MTUxNSIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTY5IDY1QzcyLjg2NiA2NSA3NiA2MS44NjYgNzYgNThDNzYgNTQuMTM0IDcyLjg2NiA1MSA2OSA1MUM2NS4xMzQgNTEgNjIgNTQuMTM0IDYyIDU4QzYyIDYxLjg2NiA2NS4xMzQgNjUgNjkgNjVaTTczLjAzMzYgNjAuOTU1MkM3My42NDEyIDYwLjEyNzMgNzQgNTkuMTA1NiA3NCA1OEM3NCA1NS4yMzg2IDcxLjc2MTQgNTMgNjkgNTNDNjcuODk0NCA1MyA2Ni44NzI3IDUzLjM1ODggNjYuMDQ0OCA1My45NjY0TDczLjAzMzYgNjAuOTU1MlpNNzEuNTUxMSA2Mi4zMDExQzcwLjgwNDIgNjIuNzQ1MSA2OS45MzE5IDYzIDY5IDYzQzY2LjIzODYgNjMgNjQgNjAuNzYxNCA2NCA1OEM2NCA1Ny4wNjgxIDY0LjI1NDkgNTYuMTk1OCA2NC42OTg5IDU1LjQ0ODlMNzEuNTUxMSA2Mi4zMDExWiIgZmlsbD0iIzE1MTUxNSIvPgo8cGF0aCBkPSJNMjMuNDI0OCA4OFY3OS42SDI0LjU4ODhMMjguMzY4OCA4Ni4xNzZWNzkuNkgyOS40MTI4Vjg4SDI4LjI2MDhMMjQuNDY4OCA4MS40MjRWODhIMjMuNDI0OFpNMzMuNzExIDg4LjE0NEMzMS45MTEgODguMTQ0IDMwLjgzMSA4Ni44NDggMzAuODMxIDg1LjI0QzMwLjgzMSA4My42MiAzMS45MTEgODIuMzI0IDMzLjcxMSA4Mi4zMjRDMzUuNDk5IDgyLjMyNCAzNi41OTEgODMuNjIgMzYuNTkxIDg1LjI0QzM2LjU5MSA4Ni44NDggMzUuNDk5IDg4LjE0NCAzMy43MTEgODguMTQ0Wk0zMy43MTEgODcuMjA4QzM0Ljg3NSA4Ny4yMDggMzUuNTQ3IDg2LjM0NCAzNS41NDcgODUuMjRDMzUuNTQ3IDg0LjEyNCAzNC44NzUgODMuMjYgMzMuNzExIDgzLjI2QzMyLjU0NyA4My4yNiAzMS44NjMgODQuMTI0IDMxLjg2MyA4NS4yNEMzMS44NjMgODYuMzQ0IDMyLjU0NyA4Ny4yMDggMzMuNzExIDg3LjIwOFpNNDMuMjgyNCA4Ny4xMzZDNDMuNDg2NCA4Ny4xMzYgNDMuODIyNCA4Ny4xIDQzLjk3ODQgODcuMDY0Vjg3Ljk4OEM0My43NzQ0IDg4LjAzNiA0My40MDI0IDg4LjA3MiA0My4wNDI0IDg4LjA3MkM0Mi4zOTQ0IDg4LjA3MiA0MS4zNTA0IDg3Ljk1MiA0MS4zNTA0IDg2LjE2NFY4My4zNDRINDAuMzU0NFY4Mi40NjhINDEuMzUwNFY4MC43MTZINDIuMzk0NFY4Mi40NjhINDMuNzg2NFY4My4zNDRINDIuMzk0NFY4NS45MzZDNDIuMzk0NCA4Ni45OTIgNDIuNzU0NCA4Ny4xMzYgNDMuMjgyNCA4Ny4xMzZaTTQ4LjIzMTggODIuMzI0QzQ5LjU5OTggODIuMzI0IDUwLjI5NTggODMuMTE2IDUwLjI5NTggODQuNTkyVjg4SDQ5LjI1MThWODUuMDQ4QzQ5LjI1MTggODMuODEyIDQ4Ljg1NTggODMuMjI0IDQ3Ljg1OTggODMuMjI0QzQ2LjgyNzggODMuMjI0IDQ2LjI5OTggODMuOTU2IDQ2LjI5OTggODUuMDcyVjg4SDQ1LjI1NThWNzkuNkg0Ni4yOTk4VjgzLjQ4OEM0Ni41OTk4IDgyLjc4IDQ3LjI3MTggODIuMzI0IDQ4LjIzMTggODIuMzI0Wk01NC4wODA2IDg4LjE0NEM1Mi44NDQ2IDg4LjE0NCA1MS45ODA2IDg3LjQgNTEuOTgwNiA4NS44NzZWODIuNDY4SDUzLjAyNDZWODUuNjM2QzUzLjAyNDYgODYuNjA4IDUzLjM4NDYgODcuMjQ0IDU0LjM2ODYgODcuMjQ0QzU1LjUwODYgODcuMjQ0IDU1Ljk0MDYgODYuMzggNTUuOTQwNiA4NS40OTJWODIuNDY4SDU2Ljk4NDZWODhINTUuOTQwNlY4Ni45OTJDNTUuNjQwNiA4Ny42NzYgNTQuOTkyNiA4OC4xNDQgNTQuMDgwNiA4OC4xNDRaTTU4Ljc3ODkgODhWODIuNDY4SDU5LjgyMjlWODMuNDc2QzYwLjAyNjkgODIuODc2IDYwLjU5MDkgODIuMzI0IDYxLjQ3ODkgODIuMzI0QzYyLjQ1MDkgODIuMzI0IDYzLjAzODkgODIuNzggNjMuMjQyOSA4My41MTJDNjMuNDgyOSA4Mi44NTIgNjQuMTY2OSA4Mi4zMjQgNjUuMDMwOSA4Mi4zMjRDNjYuNTE4OSA4Mi4zMjQgNjcuMDIyOSA4My4yODQgNjcuMDIyOSA4NC40OTZWODhINjUuOTc4OVY4NC43QzY1Ljk3ODkgODMuNjU2IDY1LjUyMjkgODMuMjI0IDY0Ljc3ODkgODMuMjI0QzYzLjk2MjkgODMuMjI0IDYzLjQyMjkgODMuNzc2IDYzLjQyMjkgODUuMTJWODhINjIuMzc4OVY4NC43ODRDNjIuMzc4OSA4My41ODQgNjEuODYyOSA4My4yMjQgNjEuMTkwOSA4My4yMjRDNjAuMzM4OSA4My4yMjQgNTkuODIyOSA4My44MjQgNTkuODIyOSA4NS4xMlY4OEg1OC43Nzg5Wk03MS44MzUzIDgyLjMyNEM3My40MTkzIDgyLjMyNCA3NC41MTEzIDgzLjUxMiA3NC41MTEzIDg1LjI0Qzc0LjUxMTMgODYuOTMyIDczLjM3MTMgODguMTQ0IDcxLjc3NTMgODguMTQ0QzcwLjkyMzMgODguMTQ0IDcwLjE1NTMgODcuNzEyIDY5Ljc5NTMgODcuMDI4Vjg4SDY4Ljc2MzNWNzkuNkg2OS43OTUzVjgzLjQ1MkM3MC4xNTUzIDgyLjc1NiA3MC45NDczIDgyLjMyNCA3MS44MzUzIDgyLjMyNFpNNzEuNjMxMyA4Ny4yMDhDNzIuNjk5MyA4Ny4yMDggNzMuNDY3MyA4Ni4zOTIgNzMuNDY3MyA4NS4yNEM3My40NjczIDg0LjA4OCA3Mi42OTkzIDgzLjI2IDcxLjYzMTMgODMuMjZDNzAuNTI3MyA4My4yNiA2OS43NDczIDg0LjA3NiA2OS43NDczIDg1LjI0QzY5Ljc0NzMgODYuMzkyIDcwLjUyNzMgODcuMjA4IDcxLjYzMTMgODcuMjA4Wk03NS44NTMxIDg4VjgyLjQ2OEg3Ni44OTcxVjgzLjQ4OEM3Ny4xOTcxIDgyLjc4IDc3Ljg2OTEgODIuMzI0IDc4LjgyOTEgODIuMzI0QzgwLjE4NTEgODIuMzI0IDgwLjg4MTEgODMuMTE2IDgwLjg4MTEgODQuNTkyVjg4SDc5Ljg0OTFWODUuMDQ4Qzc5Ljg0OTEgODMuODEyIDc5LjQ0MTEgODMuMjI0IDc4LjQ1NzEgODMuMjI0Qzc3LjQyNTEgODMuMjI0IDc2Ljg5NzEgODMuOTU2IDc2Ljg5NzEgODUuMDcyVjg4SDc1Ljg1MzFaTTg0LjkxODYgODguMTQ0QzgzLjE1NDYgODguMTQ0IDgyLjE4MjYgODYuODcyIDgyLjE4MjYgODUuMjRDODIuMTgyNiA4My42MDggODMuMjI2NiA4Mi4zMjQgODQuOTQyNiA4Mi4zMjRDODUuODE4NiA4Mi4zMjQgODYuNTM4NiA4Mi43NjggODYuODg2NiA4My40NTJWODIuNDY4SDg3LjkxODZWODhIODYuODg2NlY4Ny4wMjhDODYuNTM4NiA4Ny43MTIgODUuNzQ2NiA4OC4xNDQgODQuOTE4NiA4OC4xNDRaTTg1LjA2MjYgODcuMjA4Qzg2LjI3NDYgODcuMjA4IDg2LjkzNDYgODYuMzA4IDg2LjkzNDYgODUuMjRDODYuOTM0NiA4NC4xNzIgODYuMjc0NiA4My4yNiA4NS4wNjI2IDgzLjI2QzgzLjkyMjYgODMuMjYgODMuMjE0NiA4NC4xIDgzLjIxNDYgODUuMjRDODMuMjE0NiA4Ni4zNjggODMuOTIyNiA4Ny4yMDggODUuMDYyNiA4Ny4yMDhaTTkwLjIzMjQgODEuNTJDODkuNzI4NCA4MS41MiA4OS4zODA0IDgxLjE0OCA4OS4zODA0IDgwLjY4Qzg5LjM4MDQgODAuMjEyIDg5LjcyODQgNzkuODI4IDkwLjIzMjQgNzkuODI4QzkwLjcyNDQgNzkuODI4IDkxLjA3MjQgODAuMjEyIDkxLjA3MjQgODAuNjhDOTEuMDcyNCA4MS4xNDggOTAuNzI0NCA4MS41MiA5MC4yMzI0IDgxLjUyWk04OS43MTY0IDg4VjgyLjQ2OEg5MC43NDg0Vjg4SDg5LjcxNjRaTTkyLjU1MjMgODhWNzkuNkg5My41OTYzVjg4SDkyLjU1MjNaTTM4Ljc4MTggMTAxLjE0NEMzNy4wMTc4IDEwMS4xNDQgMzYuMDQ1OCA5OS44NzIgMzYuMDQ1OCA5OC4yNEMzNi4wNDU4IDk2LjYwOCAzNy4wODk4IDk1LjMyNCAzOC44MDU4IDk1LjMyNEMzOS42ODE4IDk1LjMyNCA0MC40MDE4IDk1Ljc2OCA0MC43NDk4IDk2LjQ1MlY5NS40NjhINDEuNzgxOFYxMDFINDAuNzQ5OFYxMDAuMDI4QzQwLjQwMTggMTAwLjcxMiAzOS42MDk4IDEwMS4xNDQgMzguNzgxOCAxMDEuMTQ0Wk0zOC45MjU4IDEwMC4yMDhDNDAuMTM3OCAxMDAuMjA4IDQwLjc5NzggOTkuMzA4IDQwLjc5NzggOTguMjRDNDAuNzk3OCA5Ny4xNzIgNDAuMTM3OCA5Ni4yNiAzOC45MjU4IDk2LjI2QzM3Ljc4NTggOTYuMjYgMzcuMDc3OCA5Ny4xIDM3LjA3NzggOTguMjRDMzcuMDc3OCA5OS4zNjggMzcuNzg1OCAxMDAuMjA4IDM4LjkyNTggMTAwLjIwOFpNNDUuMTUxNyAxMDFMNDIuNzE1NyA5NS40NjhINDMuODMxN0w0NS41NzE3IDk5LjYwOEw0Ny4zMjM3IDk1LjQ2OEg0OC40Mzk3TDQ2LjAwMzcgMTAxSDQ1LjE1MTdaTTUxLjU0MzYgMTAxLjE0NEM0OS43Nzk2IDEwMS4xNDQgNDguODA3NiA5OS44NzIgNDguODA3NiA5OC4yNEM0OC44MDc2IDk2LjYwOCA0OS44NTE2IDk1LjMyNCA1MS41Njc2IDk1LjMyNEM1Mi40NDM2IDk1LjMyNCA1My4xNjM2IDk1Ljc2OCA1My41MTE2IDk2LjQ1MlY5NS40NjhINTQuNTQzNlYxMDFINTMuNTExNlYxMDAuMDI4QzUzLjE2MzYgMTAwLjcxMiA1Mi4zNzE2IDEwMS4xNDQgNTEuNTQzNiAxMDEuMTQ0Wk01MS42ODc2IDEwMC4yMDhDNTIuODk5NiAxMDAuMjA4IDUzLjU1OTYgOTkuMzA4IDUzLjU1OTYgOTguMjRDNTMuNTU5NiA5Ny4xNzIgNTIuODk5NiA5Ni4yNiA1MS42ODc2IDk2LjI2QzUwLjU0NzYgOTYuMjYgNDkuODM5NiA5Ny4xIDQ5LjgzOTYgOTguMjRDNDkuODM5NiA5OS4zNjggNTAuNTQ3NiAxMDAuMjA4IDUxLjY4NzYgMTAwLjIwOFpNNTYuODU3NCA5NC41MkM1Ni4zNTM0IDk0LjUyIDU2LjAwNTQgOTQuMTQ4IDU2LjAwNTQgOTMuNjhDNTYuMDA1NCA5My4yMTIgNTYuMzUzNCA5Mi44MjggNTYuODU3NCA5Mi44MjhDNTcuMzQ5NCA5Mi44MjggNTcuNjk3NCA5My4yMTIgNTcuNjk3NCA5My42OEM1Ny42OTc0IDk0LjE0OCA1Ny4zNDk0IDk0LjUyIDU2Ljg1NzQgOTQuNTJaTTU2LjM0MTQgMTAxVjk1LjQ2OEg1Ny4zNzM0VjEwMUg1Ni4zNDE0Wk01OS4xNzczIDEwMVY5Mi42SDYwLjIyMTNWMTAxSDU5LjE3NzNaTTY0LjMxNyAxMDEuMTQ0QzYyLjU1MyAxMDEuMTQ0IDYxLjU4MSA5OS44NzIgNjEuNTgxIDk4LjI0QzYxLjU4MSA5Ni42MDggNjIuNjI1IDk1LjMyNCA2NC4zNDEgOTUuMzI0QzY1LjIxNyA5NS4zMjQgNjUuOTM3IDk1Ljc2OCA2Ni4yODUgOTYuNDUyVjk1LjQ2OEg2Ny4zMTdWMTAxSDY2LjI4NVYxMDAuMDI4QzY1LjkzNyAxMDAuNzEyIDY1LjE0NSAxMDEuMTQ0IDY0LjMxNyAxMDEuMTQ0Wk02NC40NjEgMTAwLjIwOEM2NS42NzMgMTAwLjIwOCA2Ni4zMzMgOTkuMzA4IDY2LjMzMyA5OC4yNEM2Ni4zMzMgOTcuMTcyIDY1LjY3MyA5Ni4yNiA2NC40NjEgOTYuMjZDNjMuMzIxIDk2LjI2IDYyLjYxMyA5Ny4xIDYyLjYxMyA5OC4yNEM2Mi42MTMgOTkuMzY4IDYzLjMyMSAxMDAuMjA4IDY0LjQ2MSAxMDAuMjA4Wk03Mi4xODY4IDk1LjMyNEM3My43NzA4IDk1LjMyNCA3NC44NjI4IDk2LjUxMiA3NC44NjI4IDk4LjI0Qzc0Ljg2MjggOTkuOTMyIDczLjcyMjggMTAxLjE0NCA3Mi4xMjY4IDEwMS4xNDRDNzEuMjc0OCAxMDEuMTQ0IDcwLjUwNjggMTAwLjcxMiA3MC4xNDY4IDEwMC4wMjhWMTAxSDY5LjExNDhWOTIuNkg3MC4xNDY4Vjk2LjQ1MkM3MC41MDY4IDk1Ljc1NiA3MS4yOTg4IDk1LjMyNCA3Mi4xODY4IDk1LjMyNFpNNzEuOTgyOCAxMDAuMjA4QzczLjA1MDggMTAwLjIwOCA3My44MTg4IDk5LjM5MiA3My44MTg4IDk4LjI0QzczLjgxODggOTcuMDg4IDczLjA1MDggOTYuMjYgNzEuOTgyOCA5Ni4yNkM3MC44Nzg4IDk2LjI2IDcwLjA5ODggOTcuMDc2IDcwLjA5ODggOTguMjRDNzAuMDk4OCA5OS4zOTIgNzAuODc4OCAxMDAuMjA4IDcxLjk4MjggMTAwLjIwOFpNNzYuMjA0NyAxMDFWOTIuNkg3Ny4yNDg3VjEwMUg3Ni4yMDQ3Wk04My45NDgzIDk3LjkyOEM4My45NDgzIDk4LjEzMiA4My45NDgzIDk4LjI4OCA4My45MjQzIDk4LjU0SDc5LjY0MDNDNzkuNjY0MyA5OS42MDggODAuMzI0MyAxMDAuMjMyIDgxLjM4MDMgMTAwLjIzMkM4Mi4xMTIzIDEwMC4yMzIgODIuNjE2MyA5OS45NDQgODIuODQ0MyA5OS40MTZIODMuODg4M0M4My42OTYzIDEwMC40MzYgODIuNjc2MyAxMDEuMTQ0IDgxLjM4MDMgMTAxLjE0NEM3OS42NzYzIDEwMS4xNDQgNzguNjA4MyAxMDAuMDE2IDc4LjYwODMgOTguMjI4Qzc4LjYwODMgOTYuNDc2IDc5LjY4ODMgOTUuMzI0IDgxLjMzMjMgOTUuMzI0QzgyLjg5MjMgOTUuMzI0IDgzLjk0ODMgOTYuNDA0IDgzLjk0ODMgOTcuOTI4Wk03OS42NDAzIDk3LjczNkg4Mi45MjgzQzgyLjkyODMgOTYuNzY0IDgyLjMyODMgOTYuMTY0IDgxLjMyMDMgOTYuMTY0QzgwLjMxMjMgOTYuMTY0IDc5LjY4ODMgOTYuOCA3OS42NDAzIDk3LjczNloiIGZpbGw9IiMxNTE1MTUiLz4KPC9zdmc+Cg=="}},Tt=(e,t)=>{const i=e.flatMap((e=>e)).flatMap((e=>e.widgetType)).filter((e=>!(0,tt.es)(t,e)));return i.length>0},ht=(e,t,i)=>async(n,o,a)=>{try{await He.Bn(e,t,i)(n,o,a)}catch(e){a.logger.logException(e)}},Nt=(e,t)=>async(i,n,o)=>{try{await He.Uf(e,t)(i,n,o)}catch(e){o.logger.logException(e)}},Ot=(e,t)=>async(i,n,o)=>{try{const o=n(),a=o.sections[e],{section:r,markup:s,widgetZones:c,widgetRestrictions:p}=await(0,qe.hz)(o,t);await(0,qe.xj)(e,o,i);let d=(0,qe.Qk)(a,r,c,o);const g=[];Object.keys(p).forEach((e=>{const t=p[e].widgetRestrictions;if(t){const i=Object.values((0,$e.A)(o.widgets,d[e].widgets)),n=i.filter((e=>!t.includes(e.type))),a=i.filter((e=>t.includes(e.type)));i.length!==a.length&&(g.push(...n),d=Object.assign(Object.assign({},d),{[e]:Object.assign(Object.assign({},d[e]),{widgets:a.map((e=>e.identifier))})}))}}));const u=new Promise((e=>{g.length?(i(Me.ff()),requestAnimationFrame((()=>{requestAnimationFrame((async()=>{var t;await i((t=g.map((e=>e.identifier)),async(e,i,{localizationService:n,messaging:o})=>{if(!t.length)return;const a=i(),r=await mt(t,a);e(Se(r));const s=n.getLocalization("section.change.restrictedwidgets");o.postMessage(l.lA.MESSAGING_WARNING,s,"*"),o.postMessage(l.lA.SET_RESTRICTED_WIDGETS,!0,"*")})),e()}))}))):e()}));await u,i(Me.k7(a,r,s,d,p,g))}catch(e){o.logger.logException(e)}},wt=(e,t,i,n)=>async(o,a,r)=>{try{await He.hB(e,t,i,n)(o,a,r)}catch(e){r.logger.logException(e)}};var jt=i(903),bt=i(5723);const zt=(e,t,i,n,o=null)=>async(a,r,{logger:s})=>{try{const{widgets:s,widgetVariants:c,metadata:l,markups:p,displayedWidgetVariants:d}=r(),g=s[e],u=d[e],y=(0,jt.A)(c[u].properties),m=null!=o?o:y,f=l.widgets[g.type],M=await Ke.U6(f.markupUrl,m);p.variants[u].isDirty&&a((0,Ze.LH)(u,y,M));const D={identifier:(0,Je.A)(),name:t,properties:m,conditionTypeParameters:n};return a((0,Ze.pY)(D,e,M,i)),D.identifier}catch(e){s.logException(e)}},At=(e,t)=>async(i,n)=>{const{widgets:o,displayedWidgetVariants:a}=n(),r=o[e].variants,s=r.indexOf(t);let c=a[e];c===t&&(c=r[s+1]||r[0]),i((0,bt._)(c,e)),i((0,Ze.g2)(e,t))};var St=i(9177);const Lt=(e,t)=>(i,n,o)=>{St.hW(e,t)(i,n,o)},Et=(e,t,i,n)=>async(o,a,r)=>{try{await St.Gm(e,t,i,n)(o,a,r)}catch(e){r.logger.logException(e)}},vt=(e,t)=>async(i,n,o)=>{try{await St.k_(e,t)(i,n,o)}catch(e){o.logger.logException(e)}},Ct=(e,t)=>async(i,n,{logger:o,messaging:a})=>{try{i(Te(e,t)),a.postMessage(l.lA.SAVE_TEMP_CONFIGURATION,null,"*")}catch(e){o.logException(e)}};var kt=i(9813),xt=i(6013);const Qt=(e,t,i=null,n=null)=>async(a,r)=>{const s=await a(ct()),{clipboard:c,editableAreasConfiguration:l,metadata:p,widgetZonesConfiguration:d}=r(),g=(0,xt.X6)(l,d,p,i,n),u=s.copiedWidgets.length+c.widgets.restrictedWidgets.length+g.length;a((0,xt.PB)(e,ne.GI.AddWidget,t,i,n,u)),a(((e,t)=>(i,n)=>{const{editableAreasConfiguration:a,clipboard:r,widgetZonesConfiguration:s}=n(),{widgetRestrictions:c}=a[e],{copiedWidgets:l,restrictedWidgets:p}=r.widgets,d=[...l,...p];let g=null!==c?d.filter((e=>(0,tt.es)(c,e.widgetType))).map((e=>e.widgetType)):d.map((e=>e.widgetType));t&&(g=g.filter((e=>{var i;const n=null===(i=s[t])||void 0===i?void 0:i.widgetRestrictions;return(0,tt.es)(n,e)}))),i(we(o.Qc.getUniqueValues(g)))})(i,n)),a((0,kt.Vu)(g))},Pt=(e,t,i=null,n=null)=>async(o,a)=>{const r=await o(ct());o((0,xt.PB)(e,ne.GI.AddSection,t,i,n,r.copiedSections.length)),o((e=>(t,i)=>{const{editableAreasConfiguration:n,clipboard:o}=i(),{copiedSections:a}=o.sections,{sectionRestrictions:r,widgetRestrictions:s}=n[e];let c=a;r&&(c=a.filter((e=>(0,tt.es)(r,e.sectionType)))),s&&(c=c.filter((e=>!Tt(e.zones,s))));const l=c.map((e=>e.clipboardItemIdentifier));t(je(l))})(i))};var Wt=i(7406);var Ut=(0,_e.N)(((e,t)=>({sectionsInArea:e.editableAreas[t.identifier].sections,dragAndDrop:e.dragAndDrop})),(()=>({removeSection:Nt,changeSection:Ot})))(Wt.A),Yt=i(6520);const Vt=[".buttonTooltip","is-template-button",".icon","button-type"];var Ft=(0,Ge.pM)({data(){return{changePropertiesIcon:l.a2.Properties,buttonType:l.VQ.Properties}},computed:{localizedButtonTooltip(){return this.$_localizationService.getLocalization(this.buttonTooltip)}},methods:{onOpenPropertiesDialog(){this.openModalDialog({componentIdentifier:this.identifier,dialogType:this.dialogType,showFooter:!0})}},props:{identifier:{required:!0,type:String},buttonTooltip:{required:!0,type:String},dialogType:{required:!0,type:String},isTemplateButton:{default:!1,type:Boolean},openModalDialog:{type:Function}}}),Rt=i(6262);var Bt=(0,Rt.A)(Ft,[["render",function(e,t,i,n,o,a){return(0,Ge.uX)(),(0,Ge.CE)("kentico-header-button",{".buttonTooltip":e.localizedButtonTooltip,"is-template-button":e.isTemplateButton,".icon":e.changePropertiesIcon,"button-type":e.buttonType,onClick:t[0]||(t[0]=(...t)=>e.onOpenPropertiesDialog&&e.onOpenPropertiesDialog(...t))},null,40,Vt)}]]);const Gt=(e,t,i)=>{const{componentIdentifier:n,dialogType:o}=e,{displayedWidgetVariants:a,metadata:r,sections:s,widgets:c,pageTemplate:p,widgetVariants:d}=t;let g;switch(o){case ne.WV.WidgetProperties:g={title:r.widgets[c[n].type].name,markupUrl:r.widgets[c[n].type].propertiesFormMarkupUrl,model:d[a[n]].properties,theme:l.Sx.Widget};break;case ne.WV.SectionProperties:g={title:r.sections[s[n].type].name,markupUrl:r.sections[s[n].type].propertiesFormMarkupUrl,model:s[n].properties,theme:l.Sx.Section};break;case ne.WV.TemplateProperties:g={title:r.pageTemplates[p.identifier].name,markupUrl:r.pageTemplates[p.identifier].propertiesFormMarkupUrl,model:p.properties,theme:l.Sx.Template}}return Object.assign(Object.assign({},g),{title:i.getLocalization("widgetproperties.header",g.title)})};var _t=(0,_e.N)((()=>({})),(()=>({openModalDialog:new Yt.G(Gt).openModalDialog})))(Bt);const Zt=["title"];var $t=(0,Ge.pM)({computed:{buttonTitle(){return this.$_localizationService.getLocalization(this.tooltip)}},methods:{async onCopy(){await this.copy(this.identifier)}},props:{tooltip:{type:String},identifier:{required:!0,type:String},copy:{type:Function}}});var Ht=(0,Rt.A)($t,[["render",function(e,t,i,n,o,a){return(0,Ge.uX)(),(0,Ge.CE)("kentico-header-button",{title:e.buttonTitle,icon:"icon-doc-copy",onClick:t[0]||(t[0]=(0,Ge.D$)(((...t)=>e.onCopy&&e.onCopy(...t)),["stop"]))},null,8,Zt)}]]);const qt=(0,_e.N)((()=>({})),(()=>({copy:nt})))(Ht),Xt=(0,_e.N)((()=>({})),(()=>({copy:ot})))(Ht);var Jt=(0,Ge.pM)({__name:"SectionHeaderExtraButtons",props:{sectionIdentifier:{},showPropertiesButton:{type:Boolean}},setup(e){const t=(0,Ge.KR)(l.VQ.Properties),i=(0,Ge.KR)(ne.WV.SectionProperties),n=(0,Ge.KR)("clipboard.sections.copybutton.tooltip");return(e,o)=>((0,Ge.uX)(),(0,Ge.CE)("div",null,[e.showPropertiesButton?((0,Ge.uX)(),(0,Ge.Wv)((0,Ge.R1)(_t),{key:0,identifier:e.sectionIdentifier,dialogType:i.value,"button-type":t.value,buttonTooltip:"section.propertiesButtonTooltip"},null,8,["identifier","dialogType","button-type"])):(0,Ge.Q3)("",!0),(0,Ge.bF)((0,Ge.R1)(Xt),{identifier:e.sectionIdentifier,tooltip:n.value},null,8,["identifier","tooltip"])]))}});var Kt=(0,_e.N)(((e,t)=>{const i=e.sections[t.sectionIdentifier];return{showPropertiesButton:!!i&&e.metadata.sections[i.type].hasProperties}}))(Jt),ei=i(2829);var ti=i(2776);const ii=[".localizationService",".widgetTitle"],ni={slot:"extraHeaderButtons",class:"ktc-extra-header-buttons"};var oi=i(1343),ai=i(680);const ri=[".localizationService",".builderConfig",".httpClient","show-personalization-popup",".popupItems",".activeItemIdentifier",".personalizationPopupHorizontalPosition",".personalizationPopupVerticalPosition",".personalizationPopupColumnType",".personalizationConditionTypes",".conditionType",".selectVariant",".addVariant",".updateVariant",".deleteVariant",".changeVariantsPriority","button-type"];var si=i(9931),ci=i(1945),li=(0,Ge.pM)({mixins:[si.co],data(){return{buttonType:l.VQ.Personalization,builderConfig:z.q$,httpClient:z.LV}},methods:{onOpenPersonalizationPopup(){if(this.isPersonalizationOpen)return void this.closePopup();const e=this.$refs.personalizationButton;this.openPopup(this.widgetIdentifier,(0,ci.cx)(e.getBoundingClientRect(),se.zG,ci.tK.Percent),(0,ci.ME)(e.getBoundingClientRect()),ne.GI.Personalization)},selectVariant(e){this.selectWidgetVariant(this.widgetIdentifier,e.key)},addVariant(e,t,i){this.addWidgetVariant(this.widgetIdentifier,e,t,i)},updateVariant(e,t,i){this.updateWidgetConditionTypeParameters(i,e,t)},deleteVariant(e){this.removeWidgetVariant(this.widgetIdentifier,e)},changeVariantsOrder(e){this.changeVariantsPriority(this.widgetIdentifier,e)},onClickAway(e){this.$nextTick((()=>{this.isPersonalizationOpen&&!o.cT.isFriendlyElementSelected(e,this.friendlyElementSelectors)&&this.closePopup()}))}},props:{widgetIdentifier:{required:!0,type:String},isPersonalizationOpen:{type:Boolean},popupItems:{type:Array},personalizationDialogHorizontalPosition:{type:String},personalizationDialogVerticalPosition:{type:String},personalizationDialogColumnType:{type:String},activeItemIdentifier:{type:String},conditionType:{type:String},personalizationConditionTypes:{type:Object},friendlyElementSelectors:{default:()=>[],type:Array},addWidgetVariant:{type:Function},updateWidgetConditionTypeParameters:{type:Function},removeWidgetVariant:{type:Function},closePopup:{type:Function},openPopup:{type:Function},selectWidgetVariant:{type:Function},changeVariantsPriority:{type:Function}}});var pi=(0,Rt.A)(li,[["render",function(e,t,i,n,o,a){const r=(0,Ge.gN)("click-away");return(0,Ge.bo)(((0,Ge.uX)(),(0,Ge.CE)("kentico-personalization-button",{ref:"personalizationButton",".localizationService":e.$_localizationService,".builderConfig":e.builderConfig,".httpClient":e.httpClient,"show-personalization-popup":e.isPersonalizationOpen,".popupItems":e.popupItems,".activeItemIdentifier":e.activeItemIdentifier,".personalizationPopupHorizontalPosition":e.personalizationDialogHorizontalPosition,".personalizationPopupVerticalPosition":e.personalizationDialogVerticalPosition,".personalizationPopupColumnType":e.personalizationDialogColumnType,".personalizationConditionTypes":e.personalizationConditionTypes,".conditionType":e.conditionType,"on:openPersonalizationPopup":t[0]||(t[0]=(...t)=>e.onOpenPersonalizationPopup&&e.onOpenPersonalizationPopup(...t)),".selectVariant":e.selectVariant,".addVariant":e.addVariant,".updateVariant":e.updateVariant,".deleteVariant":e.deleteVariant,".changeVariantsPriority":e.changeVariantsOrder,"on:closePersonalizationPopup":t[1]||(t[1]=(...t)=>e.closePopup&&e.closePopup(...t)),"button-type":e.buttonType},null,40,ri)),[[r,e.onClickAway]])}]]);const di=(e,t,{widgets:i,metadata:a,widgetVariants:r})=>{const s=Object.values((0,$e.A)(r,i[t].variants));return e?(e=>{const t=(0,n.cQ)(l.SL.LocalizationService).getLocalization("variant.original");let i;const a=(0,jt.A)(e).reverse().map(((e,n)=>(e.name||(i=n),{name:e.name||t,iconClass:null,key:e.identifier,description:e.name||t,renderActionButtons:!!e.name,parameters:e.conditionTypeParameters})));return o.Qc.move(a,i,a.length-1)})(s):(0,n.cQ)(l.SL.PopUpElementsService).getWidgetElements(Object.values(a.personalizationConditionTypes))};var gi=(0,_e.N)(((e,{widgetIdentifier:t})=>{const{widgets:i,widgetVariants:n,displayedWidgetVariants:o,popup:a,metadata:r}=e,s=i[t]?i[t].conditionType:null,c=t===a.componentIdentifier&&a.popupType===ne.GI.Personalization,l=i[t]?di(!!s,t,e):[],p=o[t]?n[o[t]].identifier:null,d=r.personalizationConditionTypes;return{isPersonalizationOpen:c,popupItems:l,personalizationDialogHorizontalPosition:a.horizontalPosition,personalizationDialogVerticalPosition:a.verticalPosition,personalizationDialogColumnType:a.columnType,activeItemIdentifier:p,conditionType:s,personalizationConditionTypes:d,friendlyElementSelectors:[`.${oi.B}`]}}),(()=>({addWidgetVariant:zt,updateWidgetConditionTypeParameters:Ze.$X,removeWidgetVariant:At,openPopup:Me.PB,closePopup:Me.fs,selectWidgetVariant:ai._j,changeVariantsPriority:Ie})))(pi),ui=(0,Ge.pM)({components:{WidgetPropertiesButton:_t,WidgetPersonalization:gi,CopyWidgetButton:qt},data(){return{showHeaderBelow:!1,propertiesDialogType:ne.WV.WidgetProperties,copyButtonTooltip:"clipboard.widgets.copybutton.tooltip"}},computed:{isPersonalizationAvailable(){return z.q$.featureSet.personalizationEnabled&&!o.UI.isEmpty(this.personalizationConditionTypes)},headerClasses(){return{"ktc-widget-header--top":!this.showHeaderBelow,"ktc-widget-header--bottom":this.showHeaderBelow,"ktc-widget-header--hidden":!this.showWidgetHeader}}},mounted(){this.ensureHeaderPosition()},updated(){this.ensureHeaderPosition()},methods:{ensureHeaderPosition(){this.showHeaderBelow=this.widgetTopOffset<this.$el.clientHeight}},props:{widgetTitle:{required:!0,type:String},widgetIdentifier:{required:!0,type:String},widgetTopOffset:{required:!0,type:Number},showWidgetHeader:{type:Boolean},personalizationConditionTypes:{type:Object},showPropertiesButton:{type:Boolean}}});var yi=(0,Rt.A)(ui,[["render",function(e,t,i,n,o,a){const r=(0,Ge.g2)("WidgetPersonalization"),s=(0,Ge.g2)("WidgetPropertiesButton"),c=(0,Ge.g2)("CopyWidgetButton");return(0,Ge.uX)(),(0,Ge.CE)("kentico-widget-header",{".localizationService":e.$_localizationService,class:(0,Ge.C4)(e.headerClasses),".widgetTitle":e.widgetTitle,"on:removeWidget":t[0]||(t[0]=t=>e.$emit(t.type))},[(0,Ge.Lk)("div",ni,[e.isPersonalizationAvailable?((0,Ge.uX)(),(0,Ge.Wv)(r,{key:0,widgetIdentifier:e.widgetIdentifier},null,8,["widgetIdentifier"])):(0,Ge.Q3)("",!0),e.showPropertiesButton?((0,Ge.uX)(),(0,Ge.Wv)(s,{key:1,identifier:e.widgetIdentifier,dialogType:e.propertiesDialogType,buttonTooltip:"widget.propertiesButtonTooltip"},null,8,["identifier","dialogType"])):(0,Ge.Q3)("",!0),(0,Ge.bF)(c,{identifier:e.widgetIdentifier,tooltip:e.copyButtonTooltip},null,8,["identifier","tooltip"])])],42,ii)}],["__scopeId","data-v-22dcce2e"]]);var mi=(0,_e.N)(((e,{widgetIdentifier:t})=>{const{widgets:i,widgetSelection:n,dragAndDrop:o,highlightedWidget:a,metadata:r}=e;return{showWidgetHeader:(a===t||n.identifier===t)&&!o.itemIdentifier,personalizationConditionTypes:r.personalizationConditionTypes,showPropertiesButton:!!i[t]&&r.widgets[i[t].type].hasEditableProperties}}))(yi),fi=i(2010);var Mi=(0,_e.N)(((e,t)=>{const{dragAndDrop:i,widgets:n,popup:o,zones:a,sections:r}=e,{sectionIdentifier:s,zoneIndex:c}=t,l=r[s]?r[s].zones[c]:"";return{zoneIdentifier:l,dragAndDrop:i,zone:a[l],popup:o,widgetsInZone:a[l]?a[l].widgets.map((e=>n[e])):[]}}),(()=>({removeWidget:Lt,closePopup:Me.fs,openPopup:(e,t,i=null,n=null)=>Qt(e,t,i,n)})))(fi.A),Di=(0,Ge.pM)({components:{WidgetZone:Mi,WidgetHeader:mi},props:Object.assign({},ti.i)});var Ii=(0,Rt.A)(Di,[["render",function(e,t,i,n,o,a){const r=(0,Ge.g2)("WidgetHeader"),s=(0,Ge.g2)("WidgetZone",!0);return(0,Ge.uX)(),(0,Ge.Wv)(s,{sectionIdentifier:e.sectionIdentifier,zoneIndex:e.zoneIndex,areaIdentifier:e.areaIdentifier},{widgetHeader:(0,Ge.k6)((({widgetTitle:e,widgetIdentifier:t,widgetTopOffset:i})=>[(0,Ge.bF)(r,{widgetTitle:e,widgetIdentifier:t,widgetTopOffset:i},null,8,["widgetTitle","widgetIdentifier","widgetTopOffset"])])),_:1},8,["sectionIdentifier","zoneIndex","areaIdentifier"])}]]);var Ti=(0,Ge.pM)({mixins:[ei.R],created(){this.widgetZone=(0,Ge.IG)(Ii)}}),hi=i(5007);var Ni=(0,_e.N)((({popup:e},{sectionIdentifier:t})=>({isSectionListOpen:e.componentIdentifier===t&&e.popupType===ne.GI.AddSection})),(()=>({closePopup:kt.fs,openPopup:Pt,setPopupPosition:kt.iy})))(hi.A);var Oi=(0,Ge.pM)({__name:"EditableArea",props:{identifier:{}},setup(e){return(e,t)=>((0,Ge.uX)(),(0,Ge.Wv)((0,Ge.R1)(Ut),{identifier:e.identifier},{sectionMarkup:(0,Ge.k6)((({sectionMarkup:t,sectionIdentifier:i})=>[(0,Ge.bF)(Ti,{sectionMarkup:t,sectionIdentifier:i,areaIdentifier:e.identifier},null,8,["sectionMarkup","sectionIdentifier","areaIdentifier"])])),sectionHeaderExtraButtons:(0,Ge.k6)((({sectionIdentifier:e})=>[(0,Ge.bF)((0,Ge.R1)(Kt),{sectionIdentifier:e},null,8,["sectionIdentifier"])])),sectionDivider:(0,Ge.k6)((({sectionIdentifier:e,areaIdentifier:t})=>[(0,Ge.bF)((0,Ge.R1)(Ni),{sectionIdentifier:e,areaIdentifier:t},null,8,["sectionIdentifier","areaIdentifier"])])),_:1},8,["identifier"]))}}),wi=i(8037),ji=i(4611),bi=i(88);const zi=e=>(...[t,i,n])=>((0,ji.Ct)(e),((e,t,i)=>async(n,o,a)=>{try{return St.QD(e,t,i)(n,o,a)}catch(e){a.logger.logException(e)}})(t,i,n));var Ai=(0,_e.N)((({modalDialogs:e,popup:t})=>({modalDialogs:e.dialogs.filter((e=>e.type===ne.WV.Custom)),popupType:t.popupType})),(()=>({selectItem:e=>new bi.Y(zi(e),ht).selectItem(e)})))(wi.A),Si=i(8885),Li=i(7307);class Ei{constructor(e,t,i){this.setWidgetPropertiesThunk=e,this.setSectionPropertiesThunk=t,this.setPageTemplatePropertiesThunk=i,this.submitPropertiesDialogForm=(e,t,i,n)=>async(o,a,r)=>{try{const r=await(0,Li.j)(t,n);if(this.isFormValid(r)){const{modalDialogs:t}=a(),n=t.dialogs[e],s=Object.assign({},i,r.data.properties);if(!(0,ke.A)(i,s)){const e=this.getSetPropertiesThunk(n.type);await o(e(n.identifier,s))}o((0,ai.CO)(e))}else o((0,Si.pK)(e)),o((0,Si.dO)(e,r.data))}catch(e){r.logger.logException(e)}},this.getSetPropertiesThunk=e=>{switch(e){case ne.WV.WidgetProperties:return this.setWidgetPropertiesThunk;case ne.WV.SectionProperties:return this.setSectionPropertiesThunk;case ne.WV.TemplateProperties:return this.setPageTemplatePropertiesThunk}},this.isFormValid=e=>"valid"===e.status}}const vi=["id",".configuration",".messages",".isModified"],Ci=[".localizationService",".formMarkup",".componentName",".isValid",".theme",".openedDialogsCount"];var ki=i(1575);var xi=(0,Ge.pM)({data(){return{$refs:undefined,dialogIndex:0,formChanged:!1}},computed:{dialogConfiguration(){return{title:this.componentName,showFooter:!0,applyButtonText:this.$_localizationService.getLocalization("widgetproperties.apply"),cancelButtonText:this.$_localizationService.getLocalization("widgetproperties.cancel"),tabs:null,theme:this.dialogTheme,showLoader:!1,dialogIndex:this.dialogIndex,openedDialogsCount:this.dialogsCount,width:"600px",maximized:!1,setPosition:!1}},modalDialogStyles(){return this.dialogsCount>1?{}:{top:0,left:0,bottom:0,right:0,position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10200}},dialogMessages(){return{unsavedChanges:this.$_localizationService.getLocalization("modalDialog.close.confirmation"),loaderMessage:this.$_localizationService.getLocalization("modaldialogs.loading"),closeTooltip:this.$_localizationService.getLocalization("typelist.closeTooltip")}}},async mounted(){(0,ki.L)(document),await this.fetchMarkup(this.dialogIndex,this.propertiesFormUrl,this.properties)},beforeUnmount(){0===this.dialogIndex&&(0,ki.Q)(document)},methods:{async onSubmitPropertiesForm(e){await this.submitDialogForm(this.dialogIndex,e.detail.configurationForm.getAttribute("action"),this.properties,e.detail.formData)},onFormChange(){this.formChanged=!0},onDialogClose(){this.closeDialog(this.dialogIndex)},async onDialogApply(){await this.$refs.propertiesForm.validateProperties()}},props:{formMarkup:{type:String},properties:{type:Object},propertiesFormUrl:{type:String},componentName:{type:String},formIsValid:{type:Boolean},dialogId:{type:String},dialogTheme:{type:String},dialogsCount:{type:Number},closeDialog:{type:Function},fetchMarkup:{type:Function},submitDialogForm:{type:Function}}});var Qi=(0,Rt.A)(xi,[["render",function(e,t,i,n,o,a){return(0,Ge.uX)(),(0,Ge.CE)("kentico-modal-dialog",{id:e.dialogId,".configuration":e.dialogConfiguration,".messages":e.dialogMessages,".isModified":e.formChanged,style:(0,Ge.Tr)(e.modalDialogStyles),onApply:t[2]||(t[2]=(...t)=>e.onDialogApply&&e.onDialogApply(...t)),onClose:t[3]||(t[3]=(...t)=>e.onDialogClose&&e.onDialogClose(...t))},[(0,Ge.Lk)("kentico-properties-form",{ref:"propertiesForm",".localizationService":e.$_localizationService,".formMarkup":e.formMarkup,".componentName":e.componentName,".isValid":e.formIsValid,".theme":e.dialogTheme,".openedDialogsCount":e.dialogsCount,"on:submitPropertiesForm":t[0]||(t[0]=(...t)=>e.onSubmitPropertiesForm&&e.onSubmitPropertiesForm(...t)),"on:formChange":t[1]||(t[1]=(...t)=>e.onFormChange&&e.onFormChange(...t))},null,40,Ci)],44,vi)}]]);var Pi=(0,_e.N)((e=>{const{modalDialogs:t}=e,i=t.dialogs[0];if(!i)return null;const{type:n,markup:o,isValid:a,title:r,markupUrl:s,model:c}=i;return{componentName:r,dialogId:se.gE,dialogType:n,dialogTheme:t.theme,formMarkup:o,properties:c,propertiesFormUrl:s,formIsValid:a,dialogsCount:t.dialogs.length}}),(()=>({closeDialog:ai.CO,fetchMarkup:ai.wB,submitDialogForm:new Ei(vt,ai.tH,Ct).submitPropertiesDialogForm})))(Qi);const Wi=[".buttonTooltip",".icon","button-type"];var Ui=i(5812),Yi=(0,Ge.pM)({data(){return{changeTemplateIcon:l.a2.Change,buttonType:l.VQ.Change}},computed:{localizedButtonTooltip(){return this.$_localizationService.getLocalization(this.buttonTooltip)}},methods:{openChangeTemplatePopup(){this.openModalDialog({url:this.dialogUrl,data:{currentTemplateIdentifier:this.currentTemplateIdentifier},title:this.$_localizationService.getLocalization("template.change"),theme:l.Sx.Template,applyCallback:this.applyCallback,showFooter:!0})},changePageTemplate(e){b.postMessage(l.lA.CONFIGURATION_CHANGED,null,"*"),b.postMessage(l.lA.CHANGE_TEMPLATE,e,"*")},async applyCallback(e){const t=e.document.querySelector(".ktc-FlatSelectedItem");if(!!!t)return{closeDialog:!1};if(t.getAttribute("data-identifier")===this.currentTemplateIdentifier)return{closeDialog:!0};const i=this.$_localizationService.getLocalization("template.change.confirmation");if(!await(0,Ui.l)(i))return{closeDialog:!1};const n=t.dataset.identifier;return this.changePageTemplate(n),{closeDialog:!0}}},props:{buttonTooltip:{required:!0,type:String},dialogUrl:{type:String},currentTemplateIdentifier:{type:String},openModalDialog:{type:Function}}});var Vi=(0,Rt.A)(Yi,[["render",function(e,t,i,n,o,a){return(0,Ge.uX)(),(0,Ge.CE)("kentico-header-button",{".buttonTooltip":e.localizedButtonTooltip,".icon":e.changeTemplateIcon,"is-template-button":!0,"button-type":e.buttonType,onClick:t[0]||(t[0]=(...t)=>e.openChangeTemplatePopup&&e.openChangeTemplatePopup(...t))},null,40,Wi)}]]);var Fi=(0,_e.N)((({config:e,pageTemplate:t})=>({currentTemplateIdentifier:t.configurationIdentifier?t.configurationIdentifier:t.identifier,dialogUrl:e.pageTemplate.selectorDialogEndpoint})),(()=>({openModalDialog:P.Dh})))(Vi);const Ri={class:"ktc-template-header"};var Bi=(0,Ge.pM)({__name:"TemplateButtons",props:{hasTemplate:{type:Boolean},hasTemplateProperties:{type:Boolean},templateIdentifier:{}},setup(e){const t=(0,Ge.KR)(ne.WV.TemplateProperties);return(e,i)=>((0,Ge.uX)(),(0,Ge.CE)("div",Ri,[e.hasTemplate?((0,Ge.uX)(),(0,Ge.Wv)((0,Ge.R1)(Fi),{key:0,buttonTooltip:"template.changebuttontooltip"})):(0,Ge.Q3)("",!0),e.hasTemplateProperties?((0,Ge.uX)(),(0,Ge.Wv)((0,Ge.R1)(_t),{key:1,buttonTooltip:"template.propertiesbuttontooltip",identifier:e.templateIdentifier,isTemplateButton:!0,dialogType:t.value},null,8,["identifier","dialogType"])):(0,Ge.Q3)("",!0)]))}}),Gi=i(5895);const _i={key:0,class:"ktc-clipboard-entries"},Zi=["text"];const $i={key:0},Hi=["text"],qi=[".items",".columnType"];var Xi=(0,Ge.pM)({methods:{onItemSelect({detail:e}){e.disabled||this.pasteItem(e.key)},onDeleteWidgetFromClipboard({detail:e}){e.deletable&&this.deleteItemFromClipboard(e.key)},onItemMouseEnter({detail:e}){const{key:t,rect:i}=e,n=window.scrollY+i.top+i.height,o=window.scrollX+i.left;this.showThumbnail(t,n,o)},onItemMouseLeave({detail:e}){this.hideThumbnail(e)}},props:{showItems:{type:Boolean},columnType:{type:String},popupItems:{type:Array},headerText:{type:String},pasteItem:{type:Function},showThumbnail:{type:Function},hideThumbnail:{type:Function},deleteItemFromClipboard:{type:Function}}});var Ji=(0,Rt.A)(Xi,[["render",function(e,t,i,n,o,a){return e.showItems&&e.popupItems.length?((0,Ge.uX)(),(0,Ge.CE)("div",$i,[(0,Ge.Lk)("kentico-popup-content-header",{text:e.headerText},null,8,Hi),(0,Ge.Lk)("kentico-pop-up-listing",{".items":e.popupItems,".columnType":e.columnType,"on:selectItem":t[0]||(t[0]=(0,Ge.D$)(((...t)=>e.onItemSelect&&e.onItemSelect(...t)),["stop"])),"on:removeItem":t[1]||(t[1]=(0,Ge.D$)(((...t)=>e.onDeleteWidgetFromClipboard&&e.onDeleteWidgetFromClipboard(...t)),["stop"])),"on:itemMouseEnter":t[2]||(t[2]=(...t)=>e.onItemMouseEnter&&e.onItemMouseEnter(...t)),"on:itemMouseLeave":t[3]||(t[3]=(...t)=>e.onItemMouseLeave&&e.onItemMouseLeave(...t))},null,40,qi)])):(0,Ge.Q3)("",!0)}],["__scopeId","data-v-99e6aeb6"]]);var Ki=(0,_e.N)((({metadata:e,clipboard:t,popup:i,editableAreasConfiguration:o,widgetZonesConfiguration:a})=>{const r=(0,n.cQ)(l.SL.LocalizationService),{copiedWidgets:s,pastableWidgets:c}=t.widgets,p=r.getLocalization("clipboard.deletebuttontooltip"),d=r.getLocalization("widget.copiedwidgets.popup.header"),g=s.map((({widgetType:t,clipboardItemIdentifier:n,conditionType:s})=>{var l,d,g,u,y,m;const{name:f,description:M,iconClass:D}=e.widgets[t],I=!c.includes(t);let T=M;if(I){const e=!(null===(g=null===(d=null===(l=o[i.areaIdentifier])||void 0===l?void 0:l.widgetRestrictions)||void 0===d?void 0:d.includes(t))||void 0===g||g);T=!(null===(m=null===(y=null===(u=a[i.zoneIdentifier])||void 0===u?void 0:u.widgetRestrictions)||void 0===y?void 0:y.includes(t))||void 0===m||m)&&e?r.getLocalization("widgetlist.copiedwidget.zoneareanotallowed"):e?r.getLocalization("widgetlist.copiedwidget.notallowed"):r.getLocalization("widgetlist.copiedwidget.zonenotallowed")}const h={name:f,iconClass:D,description:T,key:n,disabled:I,deletable:!0,deleteButtonTitle:p};if(s){const e=r.getLocalization("clipboard.widgets.tooltipwithvariants",h.name);return Object.assign(Object.assign({},h),{tooltip:h.description?`${e}\n${h.description}`:e,secondaryIconClass:"icon-personalisation-variants"})}return h})),u=i.filterPhrase?(0,Gi.d)(g.filter((e=>!e.disabled)),i.filterPhrase):g;return{popupItems:u,showItems:i.popupType===ne.GI.AddWidget&&u.length>0,columnType:i.columnType,headerText:d}}),(()=>({pasteItem:rt,showThumbnail:Ee,hideThumbnail:ve,deleteItemFromClipboard:pt})))(Ji);var en=(0,_e.N)((({metadata:e,clipboard:t,popup:i})=>{const o=(0,n.cQ)(l.SL.LocalizationService),{copiedSections:a,pastableSections:r}=t.sections,s=o.getLocalization("clipboard.deletebuttontooltip"),c=o.getLocalization("section.copiedsections.popup.header"),p=a.map((({clipboardItemIdentifier:t,sectionType:i,zones:n})=>{const{name:a,description:c,iconClass:l}=e.sections[i],p=!r.includes(t),d=n.flatMap((e=>e)).some((e=>e.conditionType));let g=p?o.getLocalization("sectionlist.copiedsection.notallowed"):c;const u={name:a,iconClass:l,description:g,key:t,disabled:p,deletable:!0,deleteButtonTitle:s};if(d){return g=`${o.getLocalization("sectionlist.copiedsection.tooltipwithvariants",a)}\n${g}`,Object.assign(Object.assign({},u),{secondaryIconClass:"icon-personalisation-variants",tooltip:g})}return u}));return{popupItems:p,showItems:i.popupType===ne.GI.AddSection&&t.sections.copiedSections.length>0,columnType:i.columnType,headerText:c}}),(()=>({pasteItem:st,showThumbnail:Ee,hideThumbnail:ve,deleteItemFromClipboard:lt})))(Ji);var tn=(0,_e.N)((({metadata:e,clipboard:t,popup:i,editableAreasConfiguration:o,widgetZonesConfiguration:a})=>{const r=(0,n.cQ)(l.SL.LocalizationService),{restrictedWidgets:s,pastableWidgets:c}=t.widgets,p=r.getLocalization("clipboard.deletebuttontooltip"),d=r.getLocalization("widget.restrictedwidgets.popup.header"),g=s.map((({widgetType:t,clipboardItemIdentifier:n,conditionType:s})=>{var l,d,g,u,y,m;const{name:f,description:M,iconClass:D}=e.widgets[t],I=!c.includes(t);let T=M;if(I){const e=!(null===(g=null===(d=null===(l=o[i.areaIdentifier])||void 0===l?void 0:l.widgetRestrictions)||void 0===d?void 0:d.includes(t))||void 0===g||g);T=!(null===(m=null===(y=null===(u=a[i.zoneIdentifier])||void 0===u?void 0:u.widgetRestrictions)||void 0===y?void 0:y.includes(t))||void 0===m||m)&&e?r.getLocalization("widgetlist.copiedwidget.zoneareanotallowed"):e?r.getLocalization("widgetlist.copiedwidget.notallowed"):r.getLocalization("widgetlist.copiedwidget.zonenotallowed")}const h={name:f,iconClass:D,description:T,key:n,disabled:I,deletable:!0,deleteButtonTitle:p};if(s){const e=r.getLocalization("clipboard.widgets.tooltipwithvariants",h.name);return Object.assign(Object.assign({},h),{tooltip:h.description?`${e}\n${h.description}`:e,secondaryIconClass:"icon-personalisation-variants"})}return h}));return{popupItems:g,showItems:i.popupType===ne.GI.AddWidget&&t.widgets.restrictedWidgets.length>0,columnType:i.columnType,headerText:d}}),(()=>({pasteItem:gt,showThumbnail:Ee,hideThumbnail:ve,deleteItemFromClipboard:dt})))(Ji),nn=i(5860),on=(0,Ge.pM)({components:{RestrictedWidgetsList:tn,CopiedWidgetsList:Ki,CopiedSectionsList:en,RecentWidgets:nn.A},computed:{popupContentHeaderText(){return this.showWidgetClipboardEntries?this.$_localizationService.getLocalization("widget.widgets.popup.header"):this.showSectionClipboardEntries?this.$_localizationService.getLocalization("section.sections.popup.header"):void 0}},props:{showComponent:{type:Boolean},showWidgetClipboardEntries:{type:Boolean},showSectionClipboardEntries:{type:Boolean}}});var an=(0,Rt.A)(on,[["render",function(e,t,i,n,o,a){const r=(0,Ge.g2)("RestrictedWidgetsList"),s=(0,Ge.g2)("CopiedWidgetsList"),c=(0,Ge.g2)("CopiedSectionsList"),l=(0,Ge.g2)("RecentWidgets");return e.showComponent&&(e.showWidgetClipboardEntries||e.showSectionClipboardEntries)?((0,Ge.uX)(),(0,Ge.CE)("div",_i,[(0,Ge.bF)(r),(0,Ge.bF)(s),(0,Ge.bF)(c),(0,Ge.bF)(l),(0,Ge.Lk)("kentico-popup-content-header",{text:e.popupContentHeaderText},null,8,Zi)])):(0,Ge.Q3)("",!0)}],["__scopeId","data-v-f9ba00da"]]);const rn=({editableAreasConfiguration:e,metadata:t,popup:i,widgetZonesConfiguration:n})=>{const o=e[i.areaIdentifier],a=n[i.zoneIdentifier];return(0,Gi.D)(i.popupType,t,o,a)},sn=e=>!e.popup.filterPhrase||(e=>{const t=rn(e);return(0,Gi.d)(t,e.popup.filterPhrase)})(e).length>0,cn=e=>{const{recentWidgets:t}=e.popup;if(!(null==t?void 0:t.length))return!1;return!(rn(e).length<=ji.oe)};var ln=(0,_e.N)((e=>{const{popup:t,clipboard:i}=e;return{showComponent:t.popupType!==ne.GI.AddWidget||sn(e),showWidgetClipboardEntries:t.popupType===ne.GI.AddWidget&&(i.widgets.copiedWidgets.length>0||i.widgets.restrictedWidgets.length>0||cn(e)),showSectionClipboardEntries:t.popupType===ne.GI.AddSection&&i.sections.copiedSections.length>0}}))(an);const pn=[".imageUrl"];var dn=(0,Ge.pM)({__name:"ClipboardThumbnails",props:{thumbnails:{}},setup(e){return(e,t)=>((0,Ge.uX)(),(0,Ge.Wv)(Ge.F,{name:"ktc-thumbnails"},{default:(0,Ge.k6)((()=>[((0,Ge.uX)(!0),(0,Ge.CE)(Ge.FK,null,(0,Ge.pI)(e.thumbnails,(e=>((0,Ge.uX)(),(0,Ge.CE)("kentico-thumbnail",{class:"ktc-clipboard-thumbnail",key:e.identifier,".imageUrl":e.url,style:(0,Ge.Tr)({left:`${e.left}px`,top:`${e.top}px`})},null,44,pn)))),128))])),_:1}))}});var gn=(0,Rt.A)(dn,[["__scopeId","data-v-675efed0"]]);const un=({widgets:e,thumbnails:t})=>i=>{const n=e.copiedWidgets.find((e=>e.clipboardItemIdentifier===i)),o=e.restrictedWidgets.find((e=>e.clipboardItemIdentifier===i));return Object.assign(Object.assign({},t[i]),{identifier:i,url:(null==n?void 0:n.thumbnail)||(null==o?void 0:o.thumbnail)})},yn=({sections:e,thumbnails:t})=>i=>{const n=e.copiedSections.find((e=>e.clipboardItemIdentifier===i));return Object.assign(Object.assign({},t[i]),{identifier:i,url:null==n?void 0:n.thumbnail})};var mn=(0,_e.N)((({clipboard:e,popup:t})=>{const i=Object.keys(e.thumbnails);if(!i.length)return{thumbnails:[]};let n;return t.popupType===ne.GI.AddWidget?n=un(e):t.popupType===ne.GI.AddSection&&(n=yn(e)),{thumbnails:n?i.map(n):[]}}))(gn),fn=i(5890);var Mn=(0,Ge.pM)({__name:"PageBuilderGlobalComponentWrapper",props:{hasTemplate:{type:Boolean},hasTemplateProperties:{type:Boolean},templateIdentifier:{},showPropertiesDialog:{type:Boolean}},setup(e){return(e,t)=>((0,Ge.uX)(),(0,Ge.Wv)((0,Ge.R1)(Ai),null,{"pop-up-content-filter":(0,Ge.k6)((()=>[(0,Ge.bF)((0,Ge.R1)(fn.A))])),"pop-up-content-top":(0,Ge.k6)((()=>[(0,Ge.bF)((0,Ge.R1)(ln))])),default:(0,Ge.k6)((()=>[e.hasTemplate||e.hasTemplateProperties?((0,Ge.uX)(),(0,Ge.Wv)(Bi,{key:0,templateIdentifier:e.templateIdentifier,hasTemplate:e.hasTemplate,hasTemplateProperties:e.hasTemplateProperties},null,8,["templateIdentifier","hasTemplate","hasTemplateProperties"])):(0,Ge.Q3)("",!0),e.showPropertiesDialog?((0,Ge.uX)(),(0,Ge.Wv)((0,Ge.R1)(Pi),{key:1})):(0,Ge.Q3)("",!0),(0,Ge.bF)((0,Ge.R1)(mn))])),_:1}))}});var Dn=(0,_e.N)((({config:e,modalDialogs:t,pageTemplate:i,metadata:n})=>({hasTemplate:!!i&&e.pageTemplate.isSelectable,hasTemplateProperties:!!i&&i.identifier&&n.pageTemplates[i.identifier].hasProperties,templateIdentifier:i&&i.identifier,showPropertiesDialog:!!t.dialogs.length&&t.dialogs[0].type!==ne.WV.Custom})))(Mn),In=i(1111),Tn=i(9800);const hn=e=>{e&&e.toolbarButtons&&Nn(e)},Nn=e=>{if(Array.isArray(e.toolbarButtons))e.toolbarButtons=e.toolbarButtons.filter((e=>e!==Tn.Xh));else if((0,In.e)(e.toolbarButtons))for(const t of Object.values(e.toolbarButtons))t&&t.buttons&&(t.buttons=t.buttons.filter((e=>e!==Tn.Xh)))};var On,wn,jn,bn=i(4434),zn=function(e,t,i,n){var o,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,i,r):o(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},An=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Sn=function(e,t){return function(i,n){t(i,n,e)}};let Ln=class extends k.M{constructor(e,t,i){super(e,t,i)}async initializePageBuilder(e){const t=new ce(e.pageIdentifier,e.applicationPath,e.configurationEndpoints,e.metadataEndpoint,e.allowedOrigins,e.constants,e.featureSet,e.pageTemplate,e.selectors,e.clipboard);(0,bn.D)(e.htmlSanitizer);const i=await super.initialize(t,(t=>Be(t,e.developmentMode)),Dn,Oi,Et,wt);window.addEventListener("focus",(async()=>{const{popup:e}=i.getState(),t=[ne.GI.AddWidget,ne.GI.AddSection];if(e.componentIdentifier&&t.includes(e.popupType)){const e=i.dispatch;await e(ct())}})),ie.forEach((e=>e({namespace:window.kentico.modalDialog,config:t,dispatch:i.dispatch,localizationService:this.localizationService}))),document.addEventListener(ae.JB,(({target:t,detail:i})=>{(0,oe.F)(t,i,hn,e.htmlSanitizer)}))}};Ln=zn([(0,p._)(),Sn(0,(0,C.W)(l.SL.LocalizationService)),Sn(1,(0,C.W)(l.SL.PageConfigurationService)),Sn(2,(0,C.W)(l.SL.MessagingService)),An("design:paramtypes",["function"==typeof(On=void 0!==x.LocalizationService&&x.LocalizationService)?On:Object,"function"==typeof(wn=void 0!==s.L&&s.L)?wn:Object,"function"==typeof(jn=void 0!==j.U&&j.U)?jn:Object])],Ln),(0,n.qx)(v),window.kentico=window.kentico||{},window.kentico.pageBuilder={init:async e=>{const t=(0,n.Wl)(Ln);await t.initializePageBuilder(e)},registerInlineEditor:a.Wy},o.DL.disableDocumentLinks()}},i={};function n(e){var o=i[e];if(void 0!==o)return o.exports;var a=i[e]={id:e,loaded:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=t,e=[],n.O=function(t,i,o,a){if(!i){var r=1/0;for(p=0;p<e.length;p++){i=e[p][0],o=e[p][1],a=e[p][2];for(var s=!0,c=0;c<i.length;c++)(!1&a||r>=a)&&Object.keys(n.O).every((function(e){return n.O[e](i[c])}))?i.splice(c--,1):(s=!1,a<r&&(r=a));if(s){e.splice(p--,1);var l=o();void 0!==l&&(t=l)}}return t}a=a||0;for(var p=e.length;p>0&&e[p-1][2]>a;p--)e[p]=e[p-1];e[p]=[i,o,a]},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){var e={428:0};n.O.j=function(t){return 0===e[t]};var t=function(t,i){var o,a,r=i[0],s=i[1],c=i[2],l=0;if(r.some((function(t){return 0!==e[t]}))){for(o in s)n.o(s,o)&&(n.m[o]=s[o]);if(c)var p=c(n)}for(t&&t(i);l<r.length;l++)a=r[l],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(p)},i=self.webpackChunkpage_builder=self.webpackChunkpage_builder||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var o=n.O(void 0,[96,624],(function(){return n(4130)}));o=n.O(o)}();